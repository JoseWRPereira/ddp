---
layout: post
title: "P0110 - Display de 7 segmentos"
date: 2020-08-05 19:55:21 -0300
categories: ucPIC
badges:
 - type: warning
   tag: Microcontrolador
 - type: secondary
   tag: PIC
 - type: secondary
   tag: PIC16F887
 - type: danger
   tag: MPLABX-XC8
 - type: success
   tag: SimulIDE
---

# Display de 7 segmentos

O display de 7 segmentos é uma das formas mais comuns de exibir um número, que pode representar o "peso" (massa) em uma balança, horas, minutos e segundos em um relógio ou cronômetro ou um simples contador de objetos em um processo qualquer.

## Objetivo

Acionar um display de 7 segmentos para exibir os 16 dígitos hexadecimais: `0,1,2,3,4,5,6,7,8,9,A,B,C,D,E e F`;

<!--more-->

## Circuito (*Hardware*)


| Figura 1: Display de 7 segmentos catodo comum |
|:---------------------------------------------:|
| ![circuito]({{site.baseurlimg}}/_posts/tUcPIC/imgP0110/P0110-disp7seg0-F.gif{{site.rawimg}}) |




## Programa (*Firmware*)


| Figura 2: Árvore de diretório do projeto |
|:----------------------------------------:|
| ![circuito]({{site.baseurlimg}}/_posts/tUcPIC/imgP0110/projectTree.jpg{{site.rawimg}})| 



```c
/*
 * File:   main.c
 * Author: josewrpereira
 *
 * Created on 5 de Agosto de 2020, 20:21:59
 * 
 * -------------------------------------------------
 *          MAPA DE ENTRADAS E SAIDAS
 * -------------------------------------------------
 *  Pinos   |nº     |Conexão
 * ---------|-------|-------------------------------
 *  RD0     |19     | Segmento a
 *  RD1     |20     | Segmento b
 *  RD2     |21     | Segmento c
 *  RD3     |22     | Segmento d
 *  RD4     |27     | Segmento e
 *  RD5     |28     | Segmento f
 *  RD6     |29     | Segmento g
 *  RD7     |30     | Segmento p
 * -------------------------------------------------
 */

#include <xc.h>
#include "config.h"
#include "delay.h"
#include "disp7seg.h"

void main(void) 
{
    char cont = 0;
    
    disp7seg_init();
    
    while( 1 )
    {
        disp7seg( cont );
        delay(500);
        cont = ++cont % 16;
    }
    return;
}
```


```c
#include <xc.h>
#include "config.h"
#include "delay.h"

char digitos7seg[16] = {    0x3F, 0x06, 0x5B, 0x4F, 
                            0x66, 0x6D, 0x7D, 0x07, 
                            0x7F, 0x6F, 0x77, 0x7C, 
                            0x39, 0x5E, 0x79, 0x71  };

void disp7seg_init( void )
{
    TRISD = 0x00;

    PORTD = 0xFF;    delay(500);
    PORTD = 0x00;    delay(500);
    PORTD = 0xFF;    delay(500);
    PORTD = 0x00;    delay(500);
}

void disp7seg( unsigned char num )
{
    PORTD = (num < 16) ? digitos7seg[num] : 0;
}
```
```c
#ifndef DISP7SEG_H
#define	DISP7SEG_H

void disp7seg_init( void );
void disp7seg( unsigned char num );

#endif
```
```c
#include <xc.h>
#include "config.h"

void delay( unsigned int t )
{
    while( t )
    {
        __delay_ms(1);
        --t;
    }
}
```

```c
#ifndef DELAY_H
#define DELAY_H

void delay( unsigned int t );

#endif
```


## Estrutura do programa

O programa presente no arquivo fonte `main.c` possui o seguinte arranjo:
* 
* 
* Programa principal.



<hr/>

Agora é a sua vez! 

Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.

Ficou com alguma dúvida, entre em contato. 

Bom trabalho! 

[Voltar]({{site.baseurl}}/docs/tecnology/ucPIC)