<!DOCTYPE html>
<html lang="pt-br" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="jekyll 3.8.6" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="/docs/index.xml">

<link rel="shortcut icon" href="/ddp/assets/favicons/favicon.png" >
<link rel="apple-touch-icon" href="/ddp/assets/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-192x192.png"sizes="192x192">

<title>P0101 - Pisca LED</title>
<meta property="og:title" content="P0101 - Pisca LED" />
<meta property="og:description" content="Site/Blog para publicação de material de estudo, notas de aula e devaneios.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:4000" />
<meta property="og:site_name" content="http://localhost:4000" />

<meta itemprop="name" content="P0101 - Pisca LED">
<meta itemprop="description" content="Site/Blog para publicação de material de estudo, notas de aula e devaneios.
">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="P0101 - Pisca LED"/>
<meta name="twitter:description" content="Site/Blog para publicação de material de estudo, notas de aula e devaneios.
"/>

<link rel="stylesheet" href="/ddp/assets/css/main.css">
<link rel="stylesheet" href="/ddp/assets/css/palette.css">
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
</head>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



<body class="td-section">
  <header>
  <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <a class="navbar-brand" href="/ddp/">
      <span class="navbar-logo"></span><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   id="svg2"
   xml:space="preserve"
   width="78.666664"
   height="86"
   viewBox="0 0 78.666664 86"
   sodipodi:docname="logo.svg"
   inkscape:export-filename="/home/josewrpereira/prog/jekyll/ddp-logo/logo.png"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96"
   inkscape:version="0.92.1 r15371"><metadata
     id="metadata8"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><defs
     id="defs6" /><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1366"
     inkscape:window-height="683"
     id="namedview4"
     showgrid="false"
     inkscape:zoom="2.744186"
     inkscape:cx="39.333331"
     inkscape:cy="28.423729"
     inkscape:window-x="0"
     inkscape:window-y="45"
     inkscape:window-maximized="1"
     inkscape:current-layer="g10" /><g
     id="g10"
     inkscape:groupmode="layer"
     inkscape:label="ink_ext_XXXXXX"
     transform="matrix(1.3333333,0,0,-1.3333333,0,86)"><ellipse
       style="fill:#e6e6e6;stroke-width:0.75"
       id="path27"
       cx="29.659958"
       cy="-32.110172"
       transform="scale(1,-1)"
       rx="32.113346"
       ry="33.889832" /><g
       id="g12"
       transform="scale(0.1)"><path
         d="m 294.398,648.387 v 0"
         style="fill:none;stroke:#bfbfbf;stroke-width:3.9849999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path14"
         inkscape:connector-curvature="0" /><path
         d="m 294.398,-3.58594 v 0"
         style="fill:none;stroke:#bfbfbf;stroke-width:3.9849999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path16"
         inkscape:connector-curvature="0" /><path
         d="M 274.559,30.4297 C 145.941,30.4297 19.4375,156.938 19.4375,313.895"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path18"
         inkscape:connector-curvature="0" /><path
         d="m 19.4375,313.895 c 0,156.96 126.5035,283.468 211.2815,283.468"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path20"
         inkscape:connector-curvature="0" /><path
         d="m 274.559,597.363 -70.141,35.071 26.301,-35.071 -26.301,-35.066"
         style="fill:#008080;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path22"
         inkscape:connector-curvature="0" /><path
         d="M 266.055,38.9336 C 137.441,38.9336 10.9336,165.441 10.9336,322.398"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path24"
         inkscape:connector-curvature="0" /><path
         d="m 10.9336,322.398 c 0,156.961 126.5074,283.469 211.2854,283.469"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path26"
         inkscape:connector-curvature="0" /><path
         d="m 266.055,605.867 -70.141,35.071 26.305,-35.071 -26.305,-35.066"
         style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path28"
         inkscape:connector-curvature="0" /><path
         d="m 314.242,614.371 c 128.613,0 255.121,-126.508 255.121,-283.469"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path30"
         inkscape:connector-curvature="0" /><path
         d="M 569.363,330.902 C 569.363,173.941 442.855,47.4375 358.078,47.4375"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path32"
         inkscape:connector-curvature="0" /><path
         d="m 314.242,47.4375 70.141,-35.0703 -26.305,35.0703 26.305,35.0664"
         style="fill:#008080;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path34"
         inkscape:connector-curvature="0" /><path
         d="m 322.746,605.867 c 128.613,0 255.121,-126.508 255.121,-283.469"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path36"
         inkscape:connector-curvature="0" /><path
         d="M 577.867,322.398 C 577.867,165.441 451.359,38.9336 366.582,38.9336"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path38"
         inkscape:connector-curvature="0" /><path
         d="M 322.746,38.9336 392.883,3.86328 366.582,38.9336 392.883,74"
         style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path40"
         inkscape:connector-curvature="0" /><path
         d="M 331.254,512.324 240.539,200.512 H 104.477 l 45.355,113.383 h 82.203"
         style="fill:none;stroke:#000000;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path42"
         inkscape:connector-curvature="0" /><path
         d="M 322.75,520.828 232.035,209.016 H 95.9727 l 45.3553,113.382 h 82.203"
         style="fill:none;stroke:#008080;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path44"
         inkscape:connector-curvature="0" /><path
         d="m 257.547,132.477 90.711,311.812 H 484.324 L 438.969,330.902 h -82.207"
         style="fill:none;stroke:#000000;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path46"
         inkscape:connector-curvature="0" /><path
         d="m 266.051,123.973 90.711,311.812 H 492.828 L 447.473,322.398 h -82.207"
         style="fill:none;stroke:#008080;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path48"
         inkscape:connector-curvature="0" /></g></g></svg><span class="text-uppercase font-weight-bold">Diferença de Potencial</span>
    </a>

    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
      <ul class="navbar-nav mt-2 mt-lg-0">
        <!--
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://github.com/JoseWRPereira/ddp" target="_blank"><span>GitHub</span></a>
        </li>-->
        
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/archive" ><span>Artigos</span></a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/tags" ><span>Tags</span></a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/indicacoes" ><span>Indicações</span></a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/sobre" ><span>Sobre</span></a>
        </li>
      </ul>
    </div>

    <!--<div class="navbar-nav d-none d-lg-block">
      <input type="search" class="form-control td-search-input" placeholder="&#xf002 Pesquise neste sítio…" aria-label="Pesquise neste sítio…" autocomplete="off">
    </div>-->

    <div class="navbar-nav d-none d-lg-block">
      <a class="gh-source" data-gh-source="github" href="https://github.com/JoseWRPereira/ddp" title="Go to repository" data-md-state="done" target="_blank">
        <div class="gh-source__repository">
          <i class="fab fa-github fa-2x" style='padding-right:20px; float:left; margin-top:5px'></i>
          JoseWRPereira/ddp
          <ul class="gh-source__facts"><li class="gh-source__fact" id='stars'></li><li id="forks" class="gh-source__fact"></li></ul>
        </div>
      </a><!-- fab fa fa-github fa-2x -->
    </div>
  </nav>
</header>

  <script>
    $(document).ready(function() {
      var url = "https://api.github.com/search/repositories?q=JoseWRPereira/ddp";
      fetch(url, {
        headers: {"Accept":"application/vnd.github.preview"}
      }).then(function(e) {
        return e.json()
      }).then(function(r) {
        console.log(r.items[0])
        stars = r.items[0]['stargazers_count']
        forks = r.items[0]['forks_count']
        $('#stars').text(stars + " Stars")
        $('#forks').text(forks + " Forks")
      });
    });
  </script>

  <div class="container-fluid td-outer">
    <div class="td-main">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
 <input type="search" class="form-control td-search-input" placeholder="&#xf002 Procurar por…" aria-label="Procurar por…" autocomplete="off">
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/ddp/docs/norteador" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Norteador</a>
  </li><ul>
    <li class="collapse show" id="norteador">
        <ul class="td-sidebar-nav__section pr-md-3">
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/tecnologia" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Tecnologia</a>
          </li>
          <ul><li class="collapse show" id="">
              <a class="td-sidebar-link td-sidebar-link__page " id="m-norteador-tecnologia-desafios-uri" href="/ddp/docs/tecnology/progURI">Desafios URI</a><a class="td-sidebar-link td-sidebar-link__page " id="m-norteador-tecnologia-uc-pic" href="/ddp/docs/tecnology/ucPIC">uC PIC</a>
              </li></ul>
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/educacao" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Educação</a>
          </li>
          <ul><li class="collapse show" id=""></li></ul>
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/ciencias" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Ciências</a>
          </li>
          <ul><li class="collapse show" id="">
              <a class="td-sidebar-link td-sidebar-link__page " id="m-norteador-ciências-eletricidade" href="/ddp/docs/science/ele">Eletricidade</a>
              </li></ul>
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/humanidades" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Humanidades</a>
          </li>
          <ul><li class="collapse show" id=""></li></ul>
    </ul>
  </nav>
</div>

        </div>
        <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
            <!--<a href="https://github.com/JoseWRPereira/ddp/edit/master/_posts/tUcPIC/2020-07-25-P0101-piscaLED.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>-->
<!--<a href="https://github.com/JoseWRPereira/ddp/issues/new?labels=question&title=Question:&body=Question on: https://github.com/JoseWRPereira/ddp/tree/master/_posts/tUcPIC/2020-07-25-P0101-piscaLED.md" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>-->
<!--<a href="https://github.com/JoseWRPereira/ddp/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>-->
<!-- this will parse through the header fields and add a button to open
     an issue / ask a question on Github. The editable field should be in
     the post frontend matter, and refer to the label to open the issue for -->

          </div>
          <nav id="TableOfContents"><ul>
            <li><ul id="TOC">
              <!-- Links will be appended here-->
            </ul></li>
          </ul></nav>
        </div>
        <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
          <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
            <ol class="breadcrumb spb-1">
              <li class="breadcrumb-item active" aria-current="page">
                <a href="http://localhost:4000/ddp/2020/P0101-piscaLED/">P0101 - Pisca LED</a>
              </li>
            </ol>
          </nav>
          <div class="td-content">
            <h1 style="margin-bottom:0px">P0101 - Pisca LED</h1>
<span class="badge badge-warning">Microcontrolador</span><span class="badge badge-secondary">PIC</span><span class="badge badge-secondary">PIC16F887</span><span class="badge badge-danger">MPLABX-XC8</span><span class="badge badge-success">SimulIDE</span>
<span class="post-date" style="font-style: italic;">2020-07-25</span>
<h1 id="pisca-led">Pisca LED</h1>

<p>Uma prática costumeira em programação, sempre que se testa a compilação em um projeto novo, é exibir na tela a mensagem <em><code class="language-plaintext highlighter-rouge">"Hello world"</code></em> ou em português <code class="language-plaintext highlighter-rouge">"Ola mundo"</code>. Tal prática ocorre pelo fato de que fazer a exibição de uma mensagem na saída padrão, que geralmente é o monitor, ser o programa mínimo funcional que se pode fazer em um programa de computador.</p>

<p>Em um sistema microcontrolado, o programa equivalente ao <code class="language-plaintext highlighter-rouge">"Ola mundo"</code> é o acionamento intermitente de uma dispositivo de sinalização em uma saída digital, ou seja, fazer um LED conectado a uma pino piscar: <code class="language-plaintext highlighter-rouge">Pisca LED</code>.</p>

<p>Assim, o <code class="language-plaintext highlighter-rouge">Pisca LED</code> ou <em><code class="language-plaintext highlighter-rouge">Blink LED</code></em> é o programa mínimo e ponto de partida no estudo dos sistemas microcontrolados, e de extrema importância por testar a compilação do programa (<em>firmware</em>), sua gravação no dispositivo alvo e ao menos uma parte do circuito em sua execução, validando o processo de compilação, gravação e execução.</p>

<h2 id="objetivo">Objetivo</h2>

<p>Acionar um LED de forma intermitente com frequência de 1Hz.</p>

<!--more-->

<h2 id="circuito-hardware">Circuito (<em>Hardware</em>)</h2>

<p>O dispositivo responsável por acionar o LED é o microcontrolador(uC), através de um pino configurado como saída. Este pino pode estar fornecendo corrente como fonte (<em>source</em>) ao ramo ou drenando (<em>sink</em>) corrente dele.</p>

<p>As configurações como fonte e dreno são mostradas na Figura 1 respectivamente em (a) e (b).</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1(a): Ligação de pino como fonte (<em>source</em>)</th>
      <th style="text-align: center">Figura 1(b): Ligação de pino como dreno (<em>sink</em>)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/P0101-piscaLEDsource.gif?raw=true" alt="circuito" /></td>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/P0101-piscaLEDsink.gif?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>O pino do uC possui limitação de corrente, que pode variar a depender do modelo ou fabricante.</p>

<p>O uC aqui utilizado, PIC16F887, possui <strong>corrente máxima de 25mA por pino</strong>, tanto como <strong>fonte</strong> quanto como <strong>dreno</strong>, conforme indica o seu <a href="http://ww1.microchip.com/downloads/en/devicedoc/41291d.pdf">datasheet</a> (seção <em>17.0 Electrical especifications</em>, página 241).</p>

<p>Note que apesar de cada pino possuir uma corrente máxima, outra limitação é que a somatória dessas corrente não pode ultrapassar <strong>200mA</strong> para o conjunto dos pinos do <strong>PORTA, PORTB e PORTE</strong>.
Bem como para o <strong>PORTC e PORTD</strong> também limitado a <strong>200mA</strong>.</p>

<p>Como em ambas as ocasiões a corrente máxima é a mesma, não existe uma predileção por uma configuração de montagem ou outra. Tal predileção ocorre quando a capacidade combinada de uma configuração é maior do que a outra, normalmente drenar corrente é a condição mais comum.</p>

<p>Para o uC aqui abordado, ambas as formas de ligação possuem as mesmas condições, não havendo diferença em capacidade de condução para o pino como fonte ou dreno.</p>

<p>A vantagem de utilizar o pino como fonte é trabalhar com uma lógica direta, em que o estado lógico 1(verdadeiro, +5V) produz o acionamento do LED, enquanto que na configuração do pino como dreno a lógica de acionamento é invertida, pois o pino em estado lógico 0(falso, 0V) produz o acionamento do LED.</p>

<h2 id="programa-firmware">Programa (<em>Firmware</em>)</h2>

<p>O programa em microcontrolador é denominado <em>firmware</em>, assim como para computador é denominado <em>software</em>.</p>

<p>Um único arquivo de código fonte (<em>Source Files</em>) é criado nesse projeto, como pode-se ver na Figura 2, denominado <code class="language-plaintext highlighter-rouge">main.c</code>.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 2: Árvore de diretório do projeto</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/projectTree.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>É uma boa prática nomear o arquivo fonte com o nome <code class="language-plaintext highlighter-rouge">main.c</code> quando ele possuir a função principal do programa, que possui o mesmo nome. Os demais arquivos fonte devem possuir nomes relacionados às funções que eles contém.</p>

<p>Segue o código fonte para o projeto Pisca LED.</p>

<pre><code class="language-C">/*
 * File:   main.c
 * Author: josewrpereira
 * 
 * Created on 21 de Setembro de 2019, 19:01
 * 
 * IDE:         MPLAB X IDE v3.15
 * Compiler:    XC8 v1.45
 * OS:          Deepin 15.11 X86_64
 * Kernel:      4.15.0-30deepin-generic
 * 
 * Objetivo: 
 *      Piscar o LED com intervalo de 500 ms
 * 
 * Pinos    |nº     |Conexão
 *  VDD     |11,32  | Alimentação (Vcc/+5V)
 *  VSS     |12,31  | Alimentação (GND/0V)
 *  RD0     |19     | LED (source/sink)
 */


#include &lt;xc.h&gt;                 // Inclui biblioteca padrão do compilador XC8 
                                // para microcontroladores Microchip.

#pragma config FOSC  = INTRC_NOCLKOUT   // Fonte de clock: oscilador interno
#pragma config WDTE  = OFF      // Desabilita WatchDog Timer 
#pragma config MCLRE = OFF      // Desab. Master Clear via pino
#pragma config LVP   = OFF      // Desab. gravação em baixa tensão

#define _XTAL_FREQ     4000000  // Freq. clock interno: 4MHz(padrão)

void main(void)                 // Função principal = main.
{                               // Início do bloco da função main.
    PORTDbits.RD0 = 0;          // Inicia RD0 com o valor 0.
    TRISDbits.TRISD0 = 0;       // Configura RD0 como Saída.
    
    while( 1 )                  // Laço de repetição infinito.
    {                           // Inicio do laço de repetição.
        PORTDbits.RD0 = 1;      // Liga RD0.
        __delay_ms(500);        // Espera 500 ms.
        PORTDbits.RD0 = 0;      // Desliga RD0.
        __delay_ms(500);        // Espera 500 ms.
    }                           // Fim do laço de repetição.
    return;                     // Caracteriza main como uma função sem retorno.
}                               // Fim do bloco da função main.

</code></pre>

<h2 id="estrutura-do-programa">Estrutura do programa</h2>

<p>O programa presente no arquivo fonte <code class="language-plaintext highlighter-rouge">main.c</code> possui o seguinte arranjo:</p>
<ul>
  <li>Comentários;</li>
  <li>Inclusão de bibliotecas;</li>
  <li>Diretivas de compilação;</li>
  <li>Definições úteis ao programa;</li>
  <li>Programa principal.</li>
</ul>

<h3 id="comentários">Comentários</h3>

<p>Os comentários são trechos do código que não são compilados e servem para auxiliar na compreesão do código.</p>

<p>Os comentários são importantes para evidenciar ou explicar trechos de código que não são explícitos, de forma a garantir uma boa compreensão para quem venha a estudar o código, ou ainda evidenciar a identificação do projeto, do autor, informações de versão de interfaces e  compiladores utilizados para criar o projeto, seu objetivo e um mapa simplificado de alocação de pinos, como usado no código aqui apresentado.</p>

<p>Em linguagem C os comentátios podem ser feitos em <code class="language-plaintext highlighter-rouge">bloco</code> ou em <code class="language-plaintext highlighter-rouge">linha</code>:</p>

<ul>
  <li><strong>Bloco</strong>: tem como delimitador inicial <code class="language-plaintext highlighter-rouge">/*</code> e o final <code class="language-plaintext highlighter-rouge">*/</code>. Todo o conteúdo entre os delimitadores não são considerados pelo compilador, sendo úteis apenas para os programadores.</li>
  <li><strong>Linha</strong>: a marcação <code class="language-plaintext highlighter-rouge">//</code> indica que todo o conteúdo à direita até o fim da linha é comentário, e da mesma forma não é considerado pelo compilador.</li>
</ul>

<p>Uma das informações possíveis para inserir nos comentários e que considero ser útil é mostrar quais pinos são usados e em qual aplicação, como um mapa de alocação de pinos, conforme segue:</p>

<pre><code class="language-C"> /*
 * Pinos    |nº     |Conexão
 *  VDD     |11,32  | Alimentação (Vcc/+5V)
 *  VSS     |12,31  | Alimentação (GND/0V)
 *  RD0     |19     | LED (source/sink)
*/
</code></pre>

<h3 id="inclusão-de-bibliotecas">Inclusão de bibliotecas</h3>

<p>O código <code class="language-plaintext highlighter-rouge">#include &lt;xc.h&gt;</code> inclui a biblioteca padrão do compilador XC8 para microcontroladores Microchip, de modo a oferecer funções básicas e as definições ou nomenclaturas dos registradores.</p>

<p>Todas as definições como <code class="language-plaintext highlighter-rouge">PORTDbits.RD0</code>, <code class="language-plaintext highlighter-rouge">TRISDbits.TRISD0</code>, <code class="language-plaintext highlighter-rouge">FOSC</code>, <code class="language-plaintext highlighter-rouge">WDTE</code>, <code class="language-plaintext highlighter-rouge">__delay_ms()</code> estão declaradas ou <em>linkadas</em> em <code class="language-plaintext highlighter-rouge">xc.h</code>, assim sendo uma biblioteca obrigatória para nosso uso.</p>

<h3 id="diretivas-de-compilação">Diretivas de compilação</h3>

<p>Algumas diretivas de compilação como <code class="language-plaintext highlighter-rouge">#pragma config</code> possibilitam o acesso a alguns periféricos de forma exclusiva durante a gravação do código.</p>

<p>Existem diversas configurações possíveis, mas usaremos apenas as seguintes configurações básicas.</p>

<pre><code class="language-C">#pragma config FOSC  = INTRC_NOCLKOUT   // Fonte de clock: oscilador interno
#pragma config WDTE  = OFF              // Desabilita WatchDog Timer 
#pragma config MCLRE = OFF              // Desab. Master Clear via pino
#pragma config LVP   = OFF              // Desab. gravação em baixa tensão
</code></pre>

<p>Tanto essas diretivas quanto as outras configurações serão apresentadas no devido momento.</p>

<p>Um destaque para a primeira linha em que o registrador <code class="language-plaintext highlighter-rouge">FOSC</code> é configurado para o oscilador interno. Por uma questão de simplificação de montagem inicial do circuito, optou-se por tal configuração por não necessitar de um cristal oscilador e seus capacitores conectados externamente junto aos pinos 13 e 14. A limitação dessa escolha é que a frequência do oscilador interno atinge no máximo 8MHz, enquanto que ao utilizar um cristal externo pode-se trabalhar com até 20MHz, e a tolerância de calibração do oscilador interno pode variar em função da temperatura, o que não afeta nossas aplicações didáticas.</p>

<h3 id="definições-úteis-ao-programa">Definições úteis ao programa</h3>

<p>A diretiva <code class="language-plaintext highlighter-rouge">#define</code>, como o próprio nome indica, define um “apelido” para um valor. Esse apelido é substituido pelo real valor antes da compilação do código pelo pré-processador, de modo que apenas faz sentido para o programador.</p>

<p>A grande vantagem é que ao utilizar um valor muitas vezes durante o código pode-se alterá-lo falcilmente se ele possuir um <code class="language-plaintext highlighter-rouge">#define</code> associado. Suponha um código que utiliza um valor constante em seus cálculos, e é definido como <code class="language-plaintext highlighter-rouge">#define PI 3.14</code>. Dorante os cáculos usa-se o “apelido” <code class="language-plaintext highlighter-rouge">PI</code> (… PI * raio … ), e ele aparece imuneras vezes no programa. Daí você programador percebe que precisa aumentar a precisão dos cálculos, e esta aproximação com duas casas decimais não é mais suficiente, agora são necessárias cinco casas decimais. Seria penoso demais procurar por todas as inserções do PI no código para mudá-los um a um, além do fato de ser muito provavel a inserção de erros. Com o <code class="language-plaintext highlighter-rouge">#define</code> basta mudar na sua declaração para <code class="language-plaintext highlighter-rouge">#define PI 3.14159</code>, que o pré-processador substitui em todos os lugares que foi utilizado o seu “apelido”.</p>

<p>A definição <code class="language-plaintext highlighter-rouge">_XTAL_FREQ</code> deve assumir o valor do oscilador que estiver sendo utilizado na configuração, neste caso, o oscilador interno com o valor padrão é 4MHz.</p>

<pre><code class="language-C">#define _XTAL_FREQ     4000000
</code></pre>
<p>Essa definição é importante sempre que for utilizada alguma função que envolva contagem de tempo, como a função <code class="language-plaintext highlighter-rouge">__delay_ms()</code>.</p>

<h3 id="programa-principal">Programa principal</h3>

<p>Todo programa em linguagem C deve possuir uma função principal, cujo nome é obrigatório <code class="language-plaintext highlighter-rouge">main</code>. 
As demais funções devem possuir nomes de acordo com a tarefa que executam, mas são de total responsabilidade do programador.</p>

<p>Como no microcontrolador não há um sistema operacional para invocar a execução do programa, a função principal não necessita de um retorno, bem como não possui argumentos de entrada. 
Para indicar essa ausência de parâmetros usa-se a palavra reservada <code class="language-plaintext highlighter-rouge">void</code> que significa <code class="language-plaintext highlighter-rouge">vazio</code>.</p>

<pre><code class="language-C">void main(void)
{                               // Início do bloco da função main.

    return;                     // Caracteriza main como uma função sem retorno.
}                               // Fim do bloco da função main.
</code></pre>

<h4 id="parametrizar-habilitar-e-inicializar">Parametrizar, habilitar e inicializar</h4>

<p>A estrutura básica do programa para o microcontrolador(<em>firmware</em>) consiste em dois blocos de código, sendo o primeiro para a configuração e o segundo para o programa.</p>

<p>O bloco de configuração consiste em parametrizar, habilitar e/ou inicializar os periféricos e dados utilizados no programa.</p>

<p>O bloco para o programa consiste no código que normalmente é executado de forma repetida enquanto o sistema estiver em execução, ou seja, enquanto o microcontrolador estiver ligado.</p>

<p>O programa aqui apresentado utiliza o pino D0 do PORTD do microcontrolador por ser o PORT mais fácil de trabalhar.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Como esse pino é parametrizado, habilitado e inicializado?</h4>

</div>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Como configurar o pino como saída?</h4>

</div>

<h4 id="registradores">Registradores</h4>

<p><strong>Todos os pinos</strong> estão conectados ao menos em um <strong>circuito específico</strong>.</p>

<p>Cada circuito específico realiza funções como, entrada digital, saída digital, contadores, comunicação, leitura de sinal analógico, etc, e são chamados de <strong>periféricos</strong>.</p>

<p>Todos os periféricos, são configurados por sinais elétricos em portas específicas, e tais sinais podem ser acessados através do mapeamento deles em um conjunto de registradores denominados <strong>Registradores de Funções Especiais</strong> (<em>SFR - Special Function Register</em>).</p>

<p>A Figura 3 mostra o mapa de registradores do PIC16F887 e pode ser acessada na página 25 do seu <a href="http://ww1.microchip.com/downloads/en/devicedoc/41291d.pdf"><em>datasheet</em></a>.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 3: Mapa dos Registradores de Funções Especiais (<em>SFR</em>)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/sfr-PIC16F886-7.png?raw=true" alt="SFR     " /></td>
    </tr>
    <tr>
      <td style="text-align: center">Fonte: <em>Datasheet</em> do PIC16F887</td>
    </tr>
  </tbody>
</table>

<p>Em destaque estão os registradores <code class="language-plaintext highlighter-rouge">PORTD</code> e <code class="language-plaintext highlighter-rouge">TRISD</code>, que são os responsáveis pela configuração e manipulação dos pinos conectados ao PORTD, entre eles o pino <code class="language-plaintext highlighter-rouge">D0</code> em que está conectado o ramo do circuito com o LED.</p>

<p>A Figura 4 mostra a representação do registrador <code class="language-plaintext highlighter-rouge">PORTD</code>, utilizado para acessar (ler ou escrever) os pinos nele associado, como o pino 19 ou RD0 do microcontrolador.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 4: Registrador PORTD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/portdreg.png?raw=true" alt="PORTDreg" /></td>
    </tr>
    <tr>
      <td style="text-align: center">Fonte: <em>Datasheet</em> do PIC16F887</td>
    </tr>
  </tbody>
</table>

<p>O PORTD possui 8 bits acessíveis individualmente e independentes, como indicado pelo <code class="language-plaintext highlighter-rouge">R/W</code> acima do nome de cada bit, respectivamente cada bit pode ser lido ou escrito.</p>

<p>O <code class="language-plaintext highlighter-rouge">-x</code> significa que o valor de <em>reset</em> é desconhecido, podendo ser 0 ou 1, mas não é possível afirmar qual valor que estará cada bit ao ligar ou religar o microcontrolador.</p>

<p>Ao <em>setar</em> qualquer um dos bits do registrador com a instrução <code class="language-plaintext highlighter-rouge">PORTDbits.RDn = 1;</code> sendo <code class="language-plaintext highlighter-rouge">n</code> o número do bit que se está manipilando, o respectivo pino assume a tensão de alimentação do chip, +5V.</p>

<p>Ao <em>resetar</em> qualquer um dos bits do registrador com a instrução <code class="language-plaintext highlighter-rouge">PORTDbits.RDn = 0;</code> sendo <code class="language-plaintext highlighter-rouge">n</code> o número do bit que se está manipilando, o respectivo pino assume o valor de 0V.</p>

<p>Para realizar a leitura do pino, pode-se utilizar o seguinte comando: <code class="language-plaintext highlighter-rouge">var = PORTDbits.RDn;</code>, sendo <code class="language-plaintext highlighter-rouge">n</code> o número do bit acessado e <code class="language-plaintext highlighter-rouge">var</code> a variável que recebe o estado do pino acessado.</p>

<p>Os dois estados lógicos são representados com os valores booleanos 0 e 1 e tais estados são assumidos quando a tensão no pino está dentro de um determinado intervalo de tensão:</p>
<ul>
  <li>2,0V &lt; Nível Lógico Alto &lt; 5.0V</li>
  <li>0,0V &lt; Nível Lógico Baixo &lt; 0,8V</li>
</ul>

<p>Note que para o intervalo entre 0,8 e 2,0, não há um estado bem definido, assim não é possível garantir para qual estado lógico será interpretada a leitura do pino.</p>

<p>As ações de <em>setar</em> e <em>resetar</em> somente são válidas se o pino estiver configurado como saída de dados. A ação de ler o estado do pino pode ser feita independente de configuração, seja entrada ou saída.</p>

<p>Para a configuração da direção de dados em um pino do <code class="language-plaintext highlighter-rouge">PORTD</code>, utiliza-se o registrador <code class="language-plaintext highlighter-rouge">TRISD</code>, conforme mostrado na Figura 5.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 5: Registrador TRISD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/trisdreg.png?raw=true" alt="TRISDreg" /></td>
    </tr>
    <tr>
      <td style="text-align: center">Fonte: <em>Datasheet</em> do PIC16F887 pág. 57</td>
    </tr>
  </tbody>
</table>

<p>O TRISD possui 8 bits acessíveis para leitura ou escrita individualmente e independentes, como indicado pelo <code class="language-plaintext highlighter-rouge">R/W</code> acima do nome de cada bit. 
O <code class="language-plaintext highlighter-rouge">-1</code> significa que o valor de <em>reset</em> é <code class="language-plaintext highlighter-rouge">1</code>, ou seja, todos os pinos são inicializados como entrada ao ligar o uC.</p>

<p>Um pino do PORTD pode ser configurado como entrada de dados com a seguinte instrução: <code class="language-plaintext highlighter-rouge">TRISDbits.TRISDn = 1;</code>, onde <code class="language-plaintext highlighter-rouge">n</code> é o número do bit que está se configurando.</p>

<p>Para a configuração do pino como saída pode-se utilizar o seguinte comando: <code class="language-plaintext highlighter-rouge">TRISDbits.TRISDn = 0;</code>.</p>

<p>Tais registradores são um mapeamento do circuito da Figura 6, conforme segue.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 6: Diagrama dos pinos RD&lt;4:0&gt;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/portD4-0_diagrama.png?raw=true" alt="DiagramaRD0-4" /></td>
    </tr>
    <tr>
      <td style="text-align: center">Fonte: <em>Datasheet</em> do PIC16F887 pág. 58</td>
    </tr>
  </tbody>
</table>

<p>Note que as ações de escrita e leitura de determinados registradores produzem sinais de controle (borda de descida no biestável) no circuito do respectivo pino.</p>
<ul>
  <li>O terminal <code class="language-plaintext highlighter-rouge">WR PORTD</code> é acionado quando a ação de escrita no PORTD ocorre.</li>
  <li>O mesmo ocorre para <code class="language-plaintext highlighter-rouge">WR TRISD</code>.</li>
  <li>Para a ação de leitura do registrador, é gerado um sinal de acionamento em <code class="language-plaintext highlighter-rouge">RD TRISD</code> ou <code class="language-plaintext highlighter-rouge">RD PORTD</code>, respectivamente.</li>
</ul>

<p>Os comandos de escrita acionam biestáveis (<em>flip-flops</em>) para armazenar a configuração ou o último dado escrito no pino.</p>

<p>Para a leitura há apenas <em>buffers</em> de acesso ao dado do pino mediante os sinais de controle.</p>

<p>As instruções de inicialização e configuração são apresentados abaixo e cada linha está ilustrada nas Figuras 7 e 8 em seguida:</p>

<pre><code class="language-C">    PORTDbits.RD0 = 0;          // Inicia RD0 com o valor 0.
    TRISDbits.TRISD0 = 0;       // Configura RD0 como Saída.
</code></pre>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 7: Inicialização do pino RD0-4</th>
      <th style="text-align: center">Figura 8: Configuração do RD0-4 como saída</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/portD0_0.png?raw=true" alt="PORTD0-0" /></td>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/trisd0_0.png?raw=true" alt="TRISD0-0" /></td>
    </tr>
    <tr>
      <td style="text-align: center">Fonte: <em>Datasheet</em> do PIC16F887 pág. 58</td>
      <td style="text-align: center">Fonte: <em>Datasheet</em> do PIC16F887 pág. 58</td>
    </tr>
  </tbody>
</table>

<h3 id="ao-infinito-e-além">Ao infinito e além</h3>
<p>A condição mais comum é que o programa fique sendo executado de forma repetida durante todo o período em que o microcontrolador estiver ligado, assim utiliza-se um laço de repetição com uma condição que é verdadeira sempre.</p>

<pre><code class="language-C">    while( 1 )                  // Laço de repetição infinito.
    {                           // Inicio do laço de repetição.
      /*Aqui vai o seu programa*/
    }                           // Fim do laço de repetição.
</code></pre>

<p>Note que em linguagem C, para uma <strong>variável numérica</strong>, <strong>todo valor diferente de zero</strong> possui o estado lógico <strong>1</strong> (verdadeiro), enquanto que <strong>apenas o zero</strong> possui o estado lógico <strong>0</strong> (falso).</p>

<p>Após a configuração do pino e sua inicialização, dentro do loop infinito é inserida a sequência de passos que atende ao objetivo proposto.</p>

<ol>
  <li>Acionar RD0, ligando o LED;</li>
  <li>Produzir um atraso de 500ms;</li>
  <li>Desacionar RD0, desligando o LED;</li>
  <li>Produzir um atraso de 500ms.</li>
</ol>

<p>Codificando esses passos temos:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">PORTDbits</span><span class="p">.</span><span class="n">RD0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>      <span class="c1">// Liga RD0.</span>
        <span class="n">__delay_ms</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>        <span class="c1">// Espera 500 ms.</span>
        <span class="n">PORTDbits</span><span class="p">.</span><span class="n">RD0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>      <span class="c1">// Desliga RD0.</span>
        <span class="n">__delay_ms</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>        <span class="c1">// Espera 500 ms.</span>
</code></pre></div></div>

<p>Os quatro passos completam o ciclo de acionamento do LED, e então este ciclo se repete em função do laço a qual ele está inserido, garantindo assim a correta execução e atendendo ao objetivo inicial de acionar o LED de forma intermitente com frequẽncia de 1Hz, ou seja, 500ms ligado e o mesmo tempo desligado.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Ligação de pino como fonte (<em>source</em>)</th>
      <th style="text-align: center">Ligação de pino como dreno (<em>sink</em>)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/P0101-piscaLEDsource.gif?raw=true" alt="circuito" /></td>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0101/P0101-piscaLEDsink.gif?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>Agora é a sua vez!</p>

<p>Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, faça alterações conscientes no código, explore, divirta-se.</p>

<p>Ficou alguma dúvida, entre em contato.</p>

<p>Bom trabalho!</p>

<p><a href="/ddp/docs/tecnology/ucPIC">Voltar</a></p>


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script>
$(document).ready(function() {

    var toc = $('#TOC');

    // Select each header
    sections = $('.td-content h1');
        $.each(sections, function(idx, v) {
            section = $(v);
            var div_id = $(section).attr('id');
            var div_text = section.text().split('¶')[0];
            var parent = $("#" + div_id)
            var content = '<li id="link_' + div_id + '" class="md-nav__item"><a class="md-nav__link" href="#' + div_id + '" title="' + div_text +'">' + div_text +'</a></li>';
            $(toc).append(content);

            // Add section code to subnavigation
            var children = $('<nav class="md-nav"><ul class="md-nav__list"></nav></ul>')
            var contenders = $("#" + div_id).nextUntil("h1");
            $.each(contenders, function(idx, contender){
               if($(contender).is('h2') || $(contender).is('h3')) {
                   var contender_id = $(contender).attr('id');
                   var contender_text = $(contender).text().split('¶')[0];
                   var content = '<li class="md-nav__item"><a class="md-nav__link" href="#' + contender_id + '" title="' + contender_text +'">' + contender_text +'</a></li>';
                   children.append(content);
                }
             })
             $("#link_" + div_id).append(children);
        });
    });
</script>

<script>
var headers = ["h1", "h2", "h3", "h4"]
var colors = ["red", "orange", "green", "blue"]

$.each(headers, function(i, header){
    var color = colors[i];
    $(header).each(function () {
        var href=$(this).attr("id");
        $(this).append('<a class="headerlink" style="color:' + color + '" href="#' + href + '" title="Permanent link">¶</a>')
    });
})
</script>

<script>
$('h1').first().append('<div></div>')</script>


            
            <br/>


          </div>
        </main>
      </div>
    </div>
    <footer class="bg-dark py-1 row d-print-none">
<div class="bottombar">
  <ul>
    
    <li>
        <a href="https://br.linkedin.com/in/josewrpereira" target="_blank">
        <i class="fab fa-linkedin"></i>
        </a>
    </li>
    
    
    
    <li>
        <a href="https://twitter.com/josewrpereira" target="_blank">
        <i class="fab fa-twitter"></i>
        </a>
    </li>
    
    
    <!--<li>
        <a href="https://www.youtube.com/channel/UC9eYcDdYDLA5p-4j3pq3KjQ" target="_blank">
        <i class="fab fa-youtube"></i>
        </a>
    </li>-->
    
    
    <li>
        <a href="https://www.instagram.com/josewrpereira" target="_blank">
        <i class="fab fa-instagram"></i>
        </a>
    </li>
    
  </ul>

  <small>
    <i class="fa fa-copyright fa-flip-horizontal"></i>
    2021 José W R Pereira
    <br>
    "Libera kiel en libereco"
  </small>
</div>
</footer>


<!--<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-center text-xs-center order-sm-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2 h1" data-toggle="tooltip" data-placement="top" title="" aria-label="Twitter" data-original-title="Twitter">
            <a class="text-white" target="_blank" href="https://twitter.com/josewrpereira">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        </ul>
      </div>
      <div class="col-6 col-sm-4 text-center text-xs-center order-sm-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2 h1" data-toggle="tooltip" data-placement="top" title="" aria-label="LinkedIn" data-original-title="LinkedIn">
            <a class="text-white" target="_blank" href="https://linkedin.com/josewrpereira">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
        </ul>
      </div>
      <div class="col-6 col-sm-4 text-center text-xs-center order-sm-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2 h1" data-toggle="tooltip" data-placement="top" title="" aria-label="GitHub" data-original-title="GitHub">
            <a class="text-white" target="_blank" href="https://github.com/JoseWRPereira/ddp">
              <i class="fab fa-github"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="row">
    <div class="col-12 col-sm-6 text-center py-2 order-sm-1">
      <small class="text-white">© 2020 José W R Pereira All Rights Reserved</small>
      
    </div>
  </div>
</footer>-->

  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="/ddp/assets/js/main.js"></script>

</body>
</html>
