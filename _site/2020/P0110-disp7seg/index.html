<!DOCTYPE html>
<html lang="pt-br" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="jekyll 3.8.6" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="/docs/index.xml">

<link rel="shortcut icon" href="/ddp/assets/favicons/favicon.png" >
<link rel="apple-touch-icon" href="/ddp/assets/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/ddp/assets/favicons/android-icon-192x192.png"sizes="192x192">

<title>P0110 - Display de 7 segmentos</title>
<meta property="og:title" content="P0110 - Display de 7 segmentos" />
<meta property="og:description" content="Site/Blog para publicação de material de estudo, notas de aula e devaneios.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:4000" />
<meta property="og:site_name" content="http://localhost:4000" />

<meta itemprop="name" content="P0110 - Display de 7 segmentos">
<meta itemprop="description" content="Site/Blog para publicação de material de estudo, notas de aula e devaneios.
">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="P0110 - Display de 7 segmentos"/>
<meta name="twitter:description" content="Site/Blog para publicação de material de estudo, notas de aula e devaneios.
"/>

<link rel="stylesheet" href="/ddp/assets/css/main.css">
<link rel="stylesheet" href="/ddp/assets/css/palette.css">
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
</head>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



<body class="td-section">
  <header>
  <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <a class="navbar-brand" href="/ddp/">
      <span class="navbar-logo"></span><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   id="svg2"
   xml:space="preserve"
   width="78.666664"
   height="86"
   viewBox="0 0 78.666664 86"
   sodipodi:docname="logo.svg"
   inkscape:export-filename="/home/josewrpereira/prog/jekyll/ddp-logo/logo.png"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96"
   inkscape:version="0.92.1 r15371"><metadata
     id="metadata8"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><defs
     id="defs6" /><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1366"
     inkscape:window-height="683"
     id="namedview4"
     showgrid="false"
     inkscape:zoom="2.744186"
     inkscape:cx="39.333331"
     inkscape:cy="28.423729"
     inkscape:window-x="0"
     inkscape:window-y="45"
     inkscape:window-maximized="1"
     inkscape:current-layer="g10" /><g
     id="g10"
     inkscape:groupmode="layer"
     inkscape:label="ink_ext_XXXXXX"
     transform="matrix(1.3333333,0,0,-1.3333333,0,86)"><ellipse
       style="fill:#e6e6e6;stroke-width:0.75"
       id="path27"
       cx="29.659958"
       cy="-32.110172"
       transform="scale(1,-1)"
       rx="32.113346"
       ry="33.889832" /><g
       id="g12"
       transform="scale(0.1)"><path
         d="m 294.398,648.387 v 0"
         style="fill:none;stroke:#bfbfbf;stroke-width:3.9849999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path14"
         inkscape:connector-curvature="0" /><path
         d="m 294.398,-3.58594 v 0"
         style="fill:none;stroke:#bfbfbf;stroke-width:3.9849999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path16"
         inkscape:connector-curvature="0" /><path
         d="M 274.559,30.4297 C 145.941,30.4297 19.4375,156.938 19.4375,313.895"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path18"
         inkscape:connector-curvature="0" /><path
         d="m 19.4375,313.895 c 0,156.96 126.5035,283.468 211.2815,283.468"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path20"
         inkscape:connector-curvature="0" /><path
         d="m 274.559,597.363 -70.141,35.071 26.301,-35.071 -26.301,-35.066"
         style="fill:#008080;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path22"
         inkscape:connector-curvature="0" /><path
         d="M 266.055,38.9336 C 137.441,38.9336 10.9336,165.441 10.9336,322.398"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path24"
         inkscape:connector-curvature="0" /><path
         d="m 10.9336,322.398 c 0,156.961 126.5074,283.469 211.2854,283.469"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path26"
         inkscape:connector-curvature="0" /><path
         d="m 266.055,605.867 -70.141,35.071 26.305,-35.071 -26.305,-35.066"
         style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path28"
         inkscape:connector-curvature="0" /><path
         d="m 314.242,614.371 c 128.613,0 255.121,-126.508 255.121,-283.469"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path30"
         inkscape:connector-curvature="0" /><path
         d="M 569.363,330.902 C 569.363,173.941 442.855,47.4375 358.078,47.4375"
         style="fill:none;stroke:#008080;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path32"
         inkscape:connector-curvature="0" /><path
         d="m 314.242,47.4375 70.141,-35.0703 -26.305,35.0703 26.305,35.0664"
         style="fill:#008080;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path34"
         inkscape:connector-curvature="0" /><path
         d="m 322.746,605.867 c 128.613,0 255.121,-126.508 255.121,-283.469"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path36"
         inkscape:connector-curvature="0" /><path
         d="M 577.867,322.398 C 577.867,165.441 451.359,38.9336 366.582,38.9336"
         style="fill:none;stroke:#000000;stroke-width:19.92550087;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path38"
         inkscape:connector-curvature="0" /><path
         d="M 322.746,38.9336 392.883,3.86328 366.582,38.9336 392.883,74"
         style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path40"
         inkscape:connector-curvature="0" /><path
         d="M 331.254,512.324 240.539,200.512 H 104.477 l 45.355,113.383 h 82.203"
         style="fill:none;stroke:#000000;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path42"
         inkscape:connector-curvature="0" /><path
         d="M 322.75,520.828 232.035,209.016 H 95.9727 l 45.3553,113.382 h 82.203"
         style="fill:none;stroke:#008080;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path44"
         inkscape:connector-curvature="0" /><path
         d="m 257.547,132.477 90.711,311.812 H 484.324 L 438.969,330.902 h -82.207"
         style="fill:none;stroke:#000000;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path46"
         inkscape:connector-curvature="0" /><path
         d="m 266.051,123.973 90.711,311.812 H 492.828 L 447.473,322.398 h -82.207"
         style="fill:none;stroke:#008080;stroke-width:29.88829994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
         id="path48"
         inkscape:connector-curvature="0" /></g></g></svg><span class="text-uppercase font-weight-bold">Diferença de Potencial</span>
    </a>

    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
      <ul class="navbar-nav mt-2 mt-lg-0">
        <!--
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://github.com/JoseWRPereira/ddp" target="_blank"><span>GitHub</span></a>
        </li>-->
        
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/archive" ><span>Artigos</span></a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/tags" ><span>Tags</span></a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/indicacoes" ><span>Indicações</span></a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/ddp/sobre" ><span>Sobre</span></a>
        </li>
      </ul>
    </div>

    <!--<div class="navbar-nav d-none d-lg-block">
      <input type="search" class="form-control td-search-input" placeholder="&#xf002 Pesquise neste sítio…" aria-label="Pesquise neste sítio…" autocomplete="off">
    </div>-->

    <div class="navbar-nav d-none d-lg-block">
      <a class="gh-source" data-gh-source="github" href="https://github.com/JoseWRPereira/ddp" title="Go to repository" data-md-state="done" target="_blank">
        <div class="gh-source__repository">
          <i class="fab fa-github fa-2x" style='padding-right:20px; float:left; margin-top:5px'></i>
          JoseWRPereira/ddp
          <ul class="gh-source__facts"><li class="gh-source__fact" id='stars'></li><li id="forks" class="gh-source__fact"></li></ul>
        </div>
      </a><!-- fab fa fa-github fa-2x -->
    </div>
  </nav>
</header>

  <script>
    $(document).ready(function() {
      var url = "https://api.github.com/search/repositories?q=JoseWRPereira/ddp";
      fetch(url, {
        headers: {"Accept":"application/vnd.github.preview"}
      }).then(function(e) {
        return e.json()
      }).then(function(r) {
        console.log(r.items[0])
        stars = r.items[0]['stargazers_count']
        forks = r.items[0]['forks_count']
        $('#stars').text(stars + " Stars")
        $('#forks').text(forks + " Forks")
      });
    });
  </script>

  <div class="container-fluid td-outer">
    <div class="td-main">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
 <input type="search" class="form-control td-search-input" placeholder="&#xf002 Procurar por…" aria-label="Procurar por…" autocomplete="off">
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/ddp/docs/norteador" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Norteador</a>
  </li><ul>
    <li class="collapse show" id="norteador">
        <ul class="td-sidebar-nav__section pr-md-3">
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/tecnologia" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Tecnologia</a>
          </li>
          <ul><li class="collapse show" id="">
              <a class="td-sidebar-link td-sidebar-link__page " id="m-norteador-tecnologia-desafios-uri" href="/ddp/docs/tecnology/progURI">Desafios URI</a><a class="td-sidebar-link td-sidebar-link__page " id="m-norteador-tecnologia-uc-pic" href="/ddp/docs/tecnology/ucPIC">uC PIC</a>
              </li></ul>
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/educacao" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Educação</a>
          </li>
          <ul><li class="collapse show" id=""></li></ul>
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/ciencias" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Ciências</a>
          </li>
          <ul><li class="collapse show" id="">
              <a class="td-sidebar-link td-sidebar-link__page " id="m-norteador-ciências-eletricidade" href="/ddp/docs/science/ele">Eletricidade</a>
              </li></ul>
          <li class="td-sidebar-nav__section-title">
            <a href="/ddp/docs/humanidades" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Humanidades</a>
          </li>
          <ul><li class="collapse show" id=""></li></ul>
    </ul>
  </nav>
</div>

        </div>
        <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
            <!--<a href="https://github.com/JoseWRPereira/ddp/edit/master/_posts/tUcPIC/2020-08-05-P0110-disp7seg.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>-->
<!--<a href="https://github.com/JoseWRPereira/ddp/issues/new?labels=question&title=Question:&body=Question on: https://github.com/JoseWRPereira/ddp/tree/master/_posts/tUcPIC/2020-08-05-P0110-disp7seg.md" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>-->
<!--<a href="https://github.com/JoseWRPereira/ddp/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>-->
<!-- this will parse through the header fields and add a button to open
     an issue / ask a question on Github. The editable field should be in
     the post frontend matter, and refer to the label to open the issue for -->

          </div>
          <nav id="TableOfContents"><ul>
            <li><ul id="TOC">
              <!-- Links will be appended here-->
            </ul></li>
          </ul></nav>
        </div>
        <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
          <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
            <ol class="breadcrumb spb-1">
              <li class="breadcrumb-item active" aria-current="page">
                <a href="http://localhost:4000/ddp/2020/P0110-disp7seg/">P0110 - Display de 7 segmentos</a>
              </li>
            </ol>
          </nav>
          <div class="td-content">
            <h1 style="margin-bottom:0px">P0110 - Display de 7 segmentos</h1>
<span class="badge badge-warning">Microcontrolador</span><span class="badge badge-secondary">PIC</span><span class="badge badge-secondary">PIC16F887</span><span class="badge badge-danger">MPLABX-XC8</span><span class="badge badge-success">SimulIDE</span>
<span class="post-date" style="font-style: italic;">2020-08-05</span>
<h1 id="display-de-7-segmentos">Display de 7 segmentos</h1>

<p>O display de 7 segmentos é uma das formas mais comuns de exibir um número, que pode representar o “peso” (massa) em uma balança, horas, minutos e segundos em um relógio ou cronômetro ou um simples contador de objetos em um processo qualquer.</p>

<h2 id="objetivo">Objetivo</h2>

<p>Acionar um display de 7 segmentos para exibir os 16 dígitos hexadecimais:</p>

<p><code class="language-plaintext highlighter-rouge">0,1,2,3,4,5,6,7,8,9,A,B,C,D,E e F</code>;</p>

<!--more-->

<h2 id="1-circuito-hardware">1. Circuito (<em>Hardware</em>)</h2>

<p>O display de 7 segmentos basicamente é um conjunto de LEDs dispostos de forma a cada um deles iluminar um segmento no encapsulamento. Existem vários modelos para diferentes necessidades, mas aqui usamos o mais comum.</p>

<p>O display, além dos sete segmentos possui ainda um ponto, que pode ser utilizado para sinalizar um ponto decimal (vírgula) ao associar vários displays para mostrar um número fracionário ou qualquer separação entre dois dígitos. Nesse projeto o ponto não será utilzado.</p>

<p>Para o acionamento do display foi utilizado o <code class="language-plaintext highlighter-rouge">PORTD</code> conforme mostrado na Figura 1.1.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.1: Display de 7 segmentos catodo comum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/disp7seg0-F.gif?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>Existem dois modelos de display, <code class="language-plaintext highlighter-rouge">Anodo comum</code> e <code class="language-plaintext highlighter-rouge">Catodo comum</code>, que se referem aos terminais conectados em comum, conforme exemplo da Figura 1.2.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.2: Segmentos do display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/disp7seg-segmentos.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>Cada segmento recebe uma identificação em letra minúscula de <code class="language-plaintext highlighter-rouge">a</code> a <code class="language-plaintext highlighter-rouge">g</code> e o <code class="language-plaintext highlighter-rouge">p</code>. 
O display possui um terminal para cada segmento do display.</p>

<p>Cada pino do <code class="language-plaintext highlighter-rouge">PORTD</code> está conectado a um segmento do display.</p>

<p>Note que cada segmento, composto por um LED, necessita de um resistor para limitar a corrente que percorre ele. Como cada pino do uC fornece uma tensão de 5V para acionar o segmento. A queda de tensão no LED é de \(2V\), aproximadamente. Pode-se assim calcular o valor do resistor limitador de corrente:</p>

<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mfrac><mrow><msub><mi>V</mi><mrow><mi>p</mi><mi>i</mi><mi>n</mi><mi>o</mi></mrow></msub><mo>−</mo><msub><mi>V</mi><mrow><mi>L</mi><mi>E</mi><mi>D</mi></mrow></msub></mrow><msub><mi>I</mi><mrow><mi>L</mi><mi>E</mi><mi>D</mi></mrow></msub></mfrac><mo>=</mo><mfrac><mrow><mn>5</mn><mo>−</mo><mn>2</mn></mrow><mrow><mn>0</mn><mo separator="true">,</mo><mn>020</mn></mrow></mfrac><mo>=</mo><mn>150</mn><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">R = \frac{ V_{pino}-V_{LED}}{I_{LED}} = \frac{5-2}{0,020} = 150\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.19633em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.20188em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">2</span><span class="mord">0</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span><span class="mord">Ω</span></span></span></span></span>

<p>O circuito apresenta um conjunto de resistores em um mesmo encapsulamento, mas poderia ser um resistor individual para cada segmento.</p>

<p>O display aqui utilizado é do tipo catodo comum, assim basta acionar os pinos do <code class="language-plaintext highlighter-rouge">PORTD</code> que correspondam aos segmentos a serem acionados para formar o dígito que se deseja exibir.</p>

<p>Para mostrar o dígito 0(zero), aciona-se os segmento <code class="language-plaintext highlighter-rouge">a, b, c, d, e, f</code>conforme mostrado na Figura 1.3.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.3: Dígito 0 (zero)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/disp7seg-digito0.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>É importante notar a sequência de pinos do display e do <code class="language-plaintext highlighter-rouge">PORT</code> utilizado, pois uma alteração de ordem muda o que é exibido no display.</p>

<p>Para o dígito 1(um) é necessário ligar apenas os segmentos <code class="language-plaintext highlighter-rouge">b</code> e <code class="language-plaintext highlighter-rouge">c</code>, mantendo os demais desligados.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.4: Dígito 1 (um)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/disp7seg-digito1.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>Para o dígito 2(dois) é mais fácil perceber os dígitos desligados, pois estão em menor quantidade, sendo o <code class="language-plaintext highlighter-rouge">c</code> e o <code class="language-plaintext highlighter-rouge">f</code> desligados e os demais ligados (exceto o ponto como já foi citado).</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.5: Dígito 2 (um)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/disp7seg-digito2.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>A Figura 1.6 mostra uma tabela com todas as combinações para os dígitos decimais e seus valores correspondentes em hexadecimal. Ao atribuir ao <code class="language-plaintext highlighter-rouge">PORTD</code> um dos valores em hexadecimal da tabela, o digito correspondente deve ser mostrado no display.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.6: Dígitos e equivalência em hexadecimal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/disp7seg-digitos.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<p>Estão faltando os dados dos dígitos que completam o conjunto hexadecimal, que podem te servir como exercícios. Bom trabalho!</p>

<h2 id="2-programa-firmware">2. Programa (<em>Firmware</em>)</h2>

<p>O programa pode ser escrito todo em um único arquivo, <code class="language-plaintext highlighter-rouge">main.c</code>, mas esta é uma forma não conveniente pois dificulta a manuteção e a organização do código. Assim, cada arquivo <code class="language-plaintext highlighter-rouge">.c</code> deve possuir somente funções correlatas ao nome desse arquivo. Por exemplo: todas as funções de manipulação do display de 7 segmentos estão contidas em <code class="language-plaintext highlighter-rouge">disp7seg.c</code>.</p>

<p>Para poder executar as funções do display no programa principal é necessário incluir o cabeçalho delas que está contido em<code class="language-plaintext highlighter-rouge">#include "disp7seg.h"</code>.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 2: Árvore de diretório do projeto</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0110/projectTree.jpg?raw=true" alt="circuito" /></td>
    </tr>
  </tbody>
</table>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * File:   main.c
 * Author: josewrpereira
 *
 * Created on 5 de Agosto de 2020, 20:21:59
 * 
 * -------------------------------------------------
 *          MAPA DE ENTRADAS E SAIDAS
 * -------------------------------------------------
 *  Pinos   |nº     |Conexão
 * ---------|-------|-------------------------------
 *  RD0     |19     | Segmento a
 *  RD1     |20     | Segmento b
 *  RD2     |21     | Segmento c
 *  RD3     |22     | Segmento d
 *  RD4     |27     | Segmento e
 *  RD5     |28     | Segmento f
 *  RD6     |29     | Segmento g
 *  RD7     |30     | Segmento p
 * -------------------------------------------------
 */</span>

<span class="cp">#include &lt;xc.h&gt;
#include "config.h"
#include "delay.h"
#include "disp7seg.h"
</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">cont</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="n">disp7seg_init</span><span class="p">();</span>
    
    <span class="k">while</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">disp7seg</span><span class="p">(</span> <span class="n">cont</span> <span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
        <span class="n">cont</span> <span class="o">=</span> <span class="o">++</span><span class="n">cont</span> <span class="o">%</span> <span class="mi">16</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;xc.h&gt;
#include "config.h"
#include "delay.h"
</span>
<span class="kt">char</span> <span class="n">digitos7seg</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>    <span class="mh">0x3F</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x5B</span><span class="p">,</span> <span class="mh">0x4F</span><span class="p">,</span> 
                            <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x6D</span><span class="p">,</span> <span class="mh">0x7D</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> 
                            <span class="mh">0x7F</span><span class="p">,</span> <span class="mh">0x6F</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x7C</span><span class="p">,</span> 
                            <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x5E</span><span class="p">,</span> <span class="mh">0x79</span><span class="p">,</span> <span class="mh">0x71</span>  <span class="p">};</span>

<span class="kt">void</span> <span class="nf">disp7seg_init</span><span class="p">(</span> <span class="kt">void</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">TRISD</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

    <span class="n">PORTD</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">;</span>    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">PORTD</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">PORTD</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">;</span>    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">PORTD</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">disp7seg</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">num</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">PORTD</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">?</span> <span class="n">digitos7seg</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef DISP7SEG_H
#define	DISP7SEG_H
</span>
<span class="kt">void</span> <span class="nf">disp7seg_init</span><span class="p">(</span> <span class="kt">void</span> <span class="p">);</span>
<span class="kt">void</span> <span class="nf">disp7seg</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">num</span> <span class="p">);</span>

<span class="cp">#endif
</span></code></pre></div></div>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;xc.h&gt;
#include "config.h"
</span>
<span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">__delay_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="o">--</span><span class="n">t</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef DELAY_H
#define DELAY_H
</span>
<span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t</span> <span class="p">);</span>

<span class="cp">#endif
</span></code></pre></div></div>

<h2 id="estrutura-do-programa">Estrutura do programa</h2>

<p>O programa presente no arquivo fonte <code class="language-plaintext highlighter-rouge">main.c</code> possui o seguinte arranjo:</p>
<ul>
  <li></li>
  <li></li>
  <li>Programa principal.</li>
</ul>

<hr />

<p>Agora é a sua vez!</p>

<p>Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.</p>

<p>Ficou com alguma dúvida, entre em contato.</p>

<p>Bom trabalho!</p>

<p><a href="/ddp/docs/tecnology/ucPIC">Voltar</a></p>


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script>
$(document).ready(function() {

    var toc = $('#TOC');

    // Select each header
    sections = $('.td-content h1');
        $.each(sections, function(idx, v) {
            section = $(v);
            var div_id = $(section).attr('id');
            var div_text = section.text().split('¶')[0];
            var parent = $("#" + div_id)
            var content = '<li id="link_' + div_id + '" class="md-nav__item"><a class="md-nav__link" href="#' + div_id + '" title="' + div_text +'">' + div_text +'</a></li>';
            $(toc).append(content);

            // Add section code to subnavigation
            var children = $('<nav class="md-nav"><ul class="md-nav__list"></nav></ul>')
            var contenders = $("#" + div_id).nextUntil("h1");
            $.each(contenders, function(idx, contender){
               if($(contender).is('h2') || $(contender).is('h3')) {
                   var contender_id = $(contender).attr('id');
                   var contender_text = $(contender).text().split('¶')[0];
                   var content = '<li class="md-nav__item"><a class="md-nav__link" href="#' + contender_id + '" title="' + contender_text +'">' + contender_text +'</a></li>';
                   children.append(content);
                }
             })
             $("#link_" + div_id).append(children);
        });
    });
</script>

<script>
var headers = ["h1", "h2", "h3", "h4"]
var colors = ["red", "orange", "green", "blue"]

$.each(headers, function(i, header){
    var color = colors[i];
    $(header).each(function () {
        var href=$(this).attr("id");
        $(this).append('<a class="headerlink" style="color:' + color + '" href="#' + href + '" title="Permanent link">¶</a>')
    });
})
</script>

<script>
$('h1').first().append('<div></div>')</script>


            
            <br/>


          </div>
        </main>
      </div>
    </div>
    <footer class="bg-dark py-1 row d-print-none">
<div class="bottombar">
  <ul>
    
    <li>
        <a href="https://br.linkedin.com/in/josewrpereira" target="_blank">
        <i class="fab fa-linkedin"></i>
        </a>
    </li>
    
    
    
    <li>
        <a href="https://twitter.com/josewrpereira" target="_blank">
        <i class="fab fa-twitter"></i>
        </a>
    </li>
    
    
    <!--<li>
        <a href="https://www.youtube.com/channel/UC9eYcDdYDLA5p-4j3pq3KjQ" target="_blank">
        <i class="fab fa-youtube"></i>
        </a>
    </li>-->
    
    
    <li>
        <a href="https://www.instagram.com/josewrpereira" target="_blank">
        <i class="fab fa-instagram"></i>
        </a>
    </li>
    
  </ul>

  <small>
    <i class="fa fa-copyright fa-flip-horizontal"></i>
    2020 José W R Pereira
    <br>
    "Libera kiel en libereco"
  </small>
</div>
</footer>


<!--<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-center text-xs-center order-sm-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2 h1" data-toggle="tooltip" data-placement="top" title="" aria-label="Twitter" data-original-title="Twitter">
            <a class="text-white" target="_blank" href="https://twitter.com/josewrpereira">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        </ul>
      </div>
      <div class="col-6 col-sm-4 text-center text-xs-center order-sm-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2 h1" data-toggle="tooltip" data-placement="top" title="" aria-label="LinkedIn" data-original-title="LinkedIn">
            <a class="text-white" target="_blank" href="https://linkedin.com/josewrpereira">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
        </ul>
      </div>
      <div class="col-6 col-sm-4 text-center text-xs-center order-sm-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2 h1" data-toggle="tooltip" data-placement="top" title="" aria-label="GitHub" data-original-title="GitHub">
            <a class="text-white" target="_blank" href="https://github.com/JoseWRPereira/ddp">
              <i class="fab fa-github"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="row">
    <div class="col-12 col-sm-6 text-center py-2 order-sm-1">
      <small class="text-white">© 2020 José W R Pereira All Rights Reserved</small>
      
    </div>
  </div>
</footer>-->

  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="/ddp/assets/js/main.js"></script>

</body>
</html>
