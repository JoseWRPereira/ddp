<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="http://localhost:4000/ddp/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/ddp/" rel="alternate" type="text/html" /><updated>2021-04-15T15:32:13-03:00</updated><id>http://localhost:4000/ddp/feed.xml</id><title type="html">Diferença de Potencial</title><subtitle>Site/Blog para publicação de material de estudo, notas de aula e devaneios.
</subtitle><author><name>José W R Pereira</name></author><entry><title type="html">Botão pulsador e LED</title><link href="http://localhost:4000/ddp/2021/c1-botaoLED/" rel="alternate" type="text/html" title="Botão pulsador e LED" /><published>2021-04-13T21:38:21-03:00</published><updated>2021-04-13T21:38:21-03:00</updated><id>http://localhost:4000/ddp/2021/c1-botaoLED</id><content type="html" xml:base="http://localhost:4000/ddp/2021/c1-botaoLED/">&lt;p&gt;Agora que sabemos como acionar uma saída digital, vamos fazer a leitura de uma entrada também digital, utilizando um botão pulsador (&lt;em&gt;push button&lt;/em&gt;) para ligar um LED.&lt;/p&gt;

&lt;p&gt;Toda construção de programa deve ser feita de forma incremental, iniciando com uma estrutura básica e agregando parte a parte do código até atingir o objetivo.&lt;/p&gt;

&lt;h1 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h1&gt;

&lt;p&gt;Acionar um LED copiando o estado lógico de um botão.&lt;/p&gt;

&lt;h1 id=&quot;conteúdo&quot;&gt;Conteúdo&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;Configuração e leitura de pino como entrada digital;&lt;/li&gt;
  &lt;li&gt;Arquivo de cabeçalho;&lt;/li&gt;
  &lt;li&gt;Estrutura condicional &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if&lt;/code&gt; e &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;else&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;Estrutura de repetição infinita &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;while( 1 )&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;Definições;&lt;/li&gt;
  &lt;li&gt;Simplificação de código.&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;circuito-hardware&quot;&gt;Circuito (&lt;a href=&quot;https://github.com/JoseWRPereira/ucPICsimulIDE/tree/master/sim_LED_botao&quot;&gt;&lt;em&gt;Hardware&lt;/em&gt;&lt;/a&gt;)&lt;/h2&gt;

&lt;p&gt;O circuito para atender o objetivo possui um LED como elemento de saída e um botão pulsador como elemento de entrada.&lt;/p&gt;

&lt;p&gt;Na saída temos uma saída configurada como fonte (&lt;em&gt;source&lt;/em&gt;), como tratado em &lt;a href=&quot;/ddp/2021/c1-piscaLED&quot;&gt;C1 - Pisca LED&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A entrada deve possuir um estado lógico bem definido, mas um botão pulsador não garante esse estado lógico, pois possui apenas dois contatos, podendo sua configuração ser normalmente aberto (NA) ou normalmente fechado(NF). Na Figura 1 é utilizado um botão pulsador NA, que é a configuração mais comum.&lt;/p&gt;

&lt;p&gt;Para garantir o tal estado lógico bem definido, é montado um ramo com o botão e um resistor, geralmente com 10kΩ, ligados em série, entre o Vcc e o GND. No ponto de conexão entre esses dois componentes temos, em relação ao terra (&lt;em&gt;GND&lt;/em&gt;), uma tensão que é a tensão do componente conectado ao terra. Este ponto é conectado ao pino do uC, assim a tensão no pino é a mesma tensão sobre o componente ligado ao terra.&lt;/p&gt;

&lt;p&gt;As duas configurações possíves são mostradas na Figura 1(a) e 1(b), em que o botão está conectado ao Vcc e a outra em que o botão está conectado ao terra.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1(a): Resistor de &lt;em&gt;Pull-down&lt;/em&gt;&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1(b): Resistor de &lt;em&gt;Pull-up&lt;/em&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-botaoLED/P0102-botaoLED-pulldownres.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-botaoLED/P0102-botaoLED-pullupres.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Na configuração &lt;em&gt;pull-down&lt;/em&gt; o resistor está conectado ao terra, o que garante, quando o botão estiver aberto, o nível lógico 0 (terra/GND).&lt;/p&gt;

&lt;p&gt;Ao pressionar o botão, ele fecha e conecta o ponto de conexão com o pino ao Vcc, aplicando o nível lógico 1 a ele.&lt;/p&gt;

&lt;p&gt;Na configuração &lt;em&gt;pull-up&lt;/em&gt; o resistor está conectado ao positivo da fonte, Vcc. O botão na condição de não acionado está com contato aberto, assim a tensão sobre ele é a tensão da fonte, nesse caso 5V, conforme a 2ª lei de Kirchhoff, garantindo o nível lógico 1.&lt;/p&gt;

&lt;p&gt;Ao pressionar o botão, ele fecha, ligando o ponto de conexão com o pino do uC ao GND, aplicando o nível lógico 0 a ele.&lt;/p&gt;

&lt;p&gt;A configuração com o resistor de &lt;em&gt;pull-down&lt;/em&gt; é a que proporciona uma lógica direta a entrada do dado: botão pressionado.&lt;/p&gt;

&lt;h2 id=&quot;programa-firmware&quot;&gt;Programa (&lt;a href=&quot;https://github.com/JoseWRPereira/ucPICsimulIDE/tree/master/c1_botaoLED.X&quot;&gt;&lt;em&gt;Firmware&lt;/em&gt;&lt;/a&gt;)&lt;/h2&gt;

&lt;p&gt;A Figura 2 mostra a árvore de diretórios do projeto em que são utilizados dois arquivos, sendo que o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt; possui o programa e o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.h&lt;/code&gt; as diretivas de configuração.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Árvore de diretório do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-botaoLED/projectTree.png?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O arquivo de configuração deve ser incluído no &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt; com o comando &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#include &quot;config.h&quot;&lt;/code&gt; logo no início do código.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#ifndef CONFIG_H
#define CONFIG_H
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// CONFIG1&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma config FOSC = INTRC_NOCLKOUT    // Oscillator Selection bits (INTOSCIO oscillator: I/O function on RA6/OSC2/CLKOUT pin, I/O function on RA7/OSC1/CLKIN)
#pragma config WDTE = OFF               // Watchdog Timer Enable bit (WDT disabled and can be enabled by SWDTEN bit of the WDTCON register)
#pragma config PWRTE = OFF              // Power-up Timer Enable bit (PWRT disabled)
#pragma config MCLRE = OFF              // RE3/MCLR pin function select bit (RE3/MCLR pin function is digital input, MCLR internally tied to VDD)
#pragma config CP = OFF                 // Code Protection bit (Program memory code protection is disabled)
#pragma config CPD = OFF                // Data Code Protection bit (Data memory code protection is disabled)
#pragma config BOREN = OFF              // Brown Out Reset Selection bits (BOR disabled)
#pragma config IESO = OFF               // Internal External Switchover bit (Internal/External Switchover mode is disabled)
#pragma config FCMEN = OFF              // Fail-Safe Clock Monitor Enabled bit (Fail-Safe Clock Monitor is disabled)
#pragma config LVP = OFF                // Low Voltage Programming Enable bit (RB3 pin has digital I/O, HV on MCLR must be used for programming)
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// CONFIG2&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma config BOR4V = BOR40V           // Brown-out Reset Selection bit (Brown-out Reset set to 4.0V)
#pragma config WRT = OFF                // Flash Program Memory Self Write Enable bits (Write protection off)
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A separação das diretivas de compilação é interessante por facilitar o tratamento dessas configurações, no caso de mudanças ou mesmo na inclusão de outras diretivas. Esse arquivo pode ser copiado para os demais projetos ou pode ser criado conforme descrito em &lt;a href=&quot;/ddp/2021/config&quot;&gt;config.h&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Segue o código fonte do &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/*
 * File:   main.c
 * Author: josewrpereira
 *
 * Created on 13 April 2021, 21:45
 * 
 * IDE:                 MPLAB X IDE v5.45
 * Compiler:            XC8 v2.31
 * Operating System:    Debian GNU/Linux bullseye/sid
 * Kernel:              Linux 5.10.0-5-amd64
 * Architecture:        x86-64
 * 
 * Objetivo: 
 *      Acionar o LED em função do botão
 * 
 * Pinos    |nº     |Conexão
 *  VDD     |11,32  | Alimentação (Vcc/+5V)
 *  VSS     |12,31  | Alimentação (GND/0V)
 *  RD0     |19     | LED   (source)
 *  RD3     |22     | BOTAO (pullDown)
 */&lt;/span&gt;


&lt;span class=&quot;cp&quot;&gt;#include &quot;config.h&quot;             // Inclui diretivas de configuração do uC
#include &amp;lt;xc.h&amp;gt;                 // Inclui biblioteca padrão do compilador XC8 
&lt;/span&gt;                                &lt;span class=&quot;c1&quot;&gt;// para microcontroladores Microchip.&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                 &lt;span class=&quot;c1&quot;&gt;// Função principal = main.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                               &lt;span class=&quot;c1&quot;&gt;// Início do escopo da função main.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// Inicia RD0 com o valor 0.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// Configura RD0 como Saída.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// Configura RD3 como Entrada;&lt;/span&gt;
                                &lt;span class=&quot;c1&quot;&gt;// Não precisa inicialização do valor do pino.&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                  &lt;span class=&quot;c1&quot;&gt;// Laço de repetição infinito.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// Inicio do escopo do laço de repetição.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// Condição: Se o botão estiver pressionado.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Liga RD0.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;                    &lt;span class=&quot;c1&quot;&gt;// Senão.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Desliga RD0.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// Fim do escopo do laço de repetição.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                     &lt;span class=&quot;c1&quot;&gt;// Caracteriza main como uma função sem retorno.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                               &lt;span class=&quot;c1&quot;&gt;// Fim do escopo da função main.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;estrutura-do-programa&quot;&gt;Estrutura do programa&lt;/h2&gt;

&lt;p&gt;O programa presente no arquivo fonte &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt; possui o seguinte arranjo:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Comentários;&lt;/li&gt;
  &lt;li&gt;Inclusão de configuração e bibliotecas;&lt;/li&gt;
  &lt;li&gt;Programa principal.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;comentários&quot;&gt;Comentários&lt;/h3&gt;
&lt;p&gt;Os comentários estão descritos em &lt;a href=&quot;/ddp/2021/c1-piscaLED&quot;&gt;C1 - Pisca LED&lt;/a&gt; e são semelhantes em todos os projetos aqui apresentados, assim serão omitidos para simplificar e focar no código que resolve o objetivo apresentado, mas é importante que você faça os comentários em todos os seus projetos.&lt;/p&gt;

&lt;h3 id=&quot;inclusão-de-bibliotecas&quot;&gt;Inclusão de bibliotecas&lt;/h3&gt;
&lt;p&gt;Note que além da biblioteca padrão &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xc.h&lt;/code&gt;, agora está incluído o arquivo de cabeçalho &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.h&lt;/code&gt;, como já citado anteriormente.&lt;/p&gt;

&lt;h3 id=&quot;programa-principal&quot;&gt;Programa principal&lt;/h3&gt;

&lt;p&gt;O programa principal pode ser dividido em duas partes: configuração e laço de repetição.&lt;/p&gt;

&lt;p&gt;O trecho de configuração no código inicializa o pino RD0 do PORTD com o valor zero, que é para iniciar com o LED desligado.&lt;/p&gt;

&lt;p&gt;A linha seguinte configura o RD0 como saída, porque é o pino que aciona o LED.&lt;/p&gt;

&lt;p&gt;Em seguida é configurado como entrada o pino RD3.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// Inicia RD0 com o valor 0.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// Configura RD0 como Saída.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// Configura RD3 como Entrada;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note que o RD3 não é inicializado porque o dado vem de fora do uC, assim não faz sentido inicializá-lo pois não é um dado de saída.&lt;/p&gt;

&lt;p&gt;O loop infinito possui o ciclo de execução que atende o objetivo proposto sendo estruturado da seguinte forma:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;leitura do estado lógico no pino de entrada;&lt;/li&gt;
  &lt;li&gt;ligar o LED se o estado lógico do pino é 1;&lt;/li&gt;
  &lt;li&gt;desligar o LED se o estado lógico do pino é 0;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Segue a codificação da estrutura do laço de repetição.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                  &lt;span class=&quot;c1&quot;&gt;// Laço de repetição infinito.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// Inicio do laço de repetição.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// Condição: Se o botão estiver pressionado.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Liga RD0.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;                    &lt;span class=&quot;c1&quot;&gt;// Senão.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Desliga RD0.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// Fim do laço de repetição.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;utilizando-defines&quot;&gt;Utilizando defines&lt;/h2&gt;

&lt;p&gt;Uma das ferramentas mais interessantes de se trabalhar é a utilização dos &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;defines&lt;/code&gt; pois facilitam muito a interpretação e a leitura do código, podendo-se utilizar um termo que faça sentido com a aplicação.&lt;/p&gt;

&lt;p&gt;Sendo assim, pode-se definir os pinos utilizados com um termo mais coerente com as suas funções.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;xc.h&amp;gt;
#include &quot;config.h&quot;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define LED     PORTDbits.RD0
#define BOTAO   PORTDbits.RD3
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOTAO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Observando a estrutura condicional dentro do laço de repetição, pode-se ver que a leitura e interpretação do funcionamento do programa está mais evidente.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Se o BOTAO estiver acionado&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ligar o LED&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;senão&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;desligar o LED&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;A estrutura condicional &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if&lt;/code&gt; verifica se o conteúdo entre os parênteses é verdadeiro para executar o código à seguir. A condição &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BOTAO == 1&lt;/code&gt; é uma comparação que verifica a igualdade(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;==&lt;/code&gt;) entre os dois termos &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BOTAO&lt;/code&gt; e &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;A condição verdadeira dentro da estrutura do &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if&lt;/code&gt; não precisa ser uma comparação, pode ser o estado lógico de uma variável ou de um registrador. Assim pode-se utilizar a seguinte condição: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if( BOTAO )&lt;/code&gt; pois &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BOTAO&lt;/code&gt; é o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTDbits.RD3&lt;/code&gt;, que é um registrador e pode assumir os estado lógicos 1 ou 0, respectivamente verdadeiro ou falso.&lt;/p&gt;

&lt;p&gt;O código abaixo utiliza a condicional sem a comparação, apenas com o estado lógico da entrada.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &quot;config.h&quot;
#include &amp;lt;xc.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define LED     PORTDbits.RD0
#define BOTAO   PORTDbits.RD3
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOTAO&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;simplificando-o-código&quot;&gt;Simplificando o código&lt;/h2&gt;

&lt;p&gt;O processo de codificação envolve muitas etapas e compromissos com um equilíbrio entre simplicidade, tamanho e velocidade de execução, sendo que o ideal seria um código o &lt;strong&gt;mais simples&lt;/strong&gt; possível, com o &lt;strong&gt;menor tamanho&lt;/strong&gt; e com a maior &lt;strong&gt;velocidade de execução&lt;/strong&gt;. Porém essa condição combinada é praticamente uma utopia. Então o programador deve escolher qual dessas características é prioritária.&lt;/p&gt;

&lt;p&gt;A simplificação do codigo exposto acima, num dos raros casos, pode ser melhorado nesses três aspectos.&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &quot;config.h&quot;
#include &amp;lt;xc.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define LED             PORTDbits.RD0
#define BOTAO           PORTDbits.RD3
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOTAO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Como a condição para acionar o LED é o botão estar pressionado, a lógica é direta nesse acionamento. Assim, basta atribuir o valor da entrada (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BOTAO&lt;/code&gt;) à saída (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LED&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;O código dentro do laço de repetição assim ficou mais simples de compreender, menor em extensão e por consequência com execução mais rápida.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Botão com resistor de &lt;em&gt;pull-down&lt;/em&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-botaoLED/P0102-botaoLED-pulldownres.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;inversão-da-entrada&quot;&gt;Inversão da entrada&lt;/h2&gt;

&lt;p&gt;Como visto no início desta postagem, existe a possibilidade de ligar o botão com um resistor de &lt;em&gt;pull-down&lt;/em&gt; ou &lt;em&gt;pull-up&lt;/em&gt;. Caso a ligação já esteja feita, é muito mais simples mudar o estado lógico do pino no programa do que mudar no circuito, seja no esquemático ou na montagem.&lt;/p&gt;

&lt;p&gt;A condição do circuito abaixo utilizando o código já apresentado, mostra que o comportamento do LED está invertido em relação ao pressionar do botão. O botão pressionado apaga o LED e o botão não pressionado mantém o LED ligado.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Botão com resistor de &lt;em&gt;pull-up&lt;/em&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-botaoLED/P0102-botaoLED-pullupres.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Para inverter o estado lógico da entrada, e garantir que ao pressionar o botão o LED acenda, basta inserir o operador de inversão lógica &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!&lt;/code&gt;, equivalente a uma porta lógica inversora: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LED = !BOTAO;&lt;/code&gt;. Essa instrução significa que o LED recebe o estado lógico inverso do BOTAO.&lt;/p&gt;

&lt;p&gt;Segue o código com o estado lógico do botão invertido e abaixo o seu comportamento no simulador.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &quot;config.h&quot;
#include &amp;lt;xc.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define LED             PORTDbits.RD0
#define BOTAO           PORTDbits.RD3
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;LED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOTAO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Botão com resistor de &lt;em&gt;pull-up&lt;/em&gt;  e inversão de estado lógico em código&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-botaoLED/P0102-botaoLED-pullupresInv.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;Agora é a sua vez!&lt;/p&gt;

&lt;p&gt;Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.&lt;/p&gt;

&lt;p&gt;Ficou com alguma dúvida, entre em contato.&lt;/p&gt;

&lt;p&gt;Bom trabalho!&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2021/c1-piscaLED&quot;&gt;« C1 - Pisca LED&lt;/a&gt; « C1 - Botão pulsador e LED » &lt;a href=&quot;&quot;&gt;»&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W R Pereira</name></author><category term="ucPIC" /><summary type="html">Agora que sabemos como acionar uma saída digital, vamos fazer a leitura de uma entrada também digital, utilizando um botão pulsador (push button) para ligar um LED.</summary></entry><entry><title type="html">C1 - Pisca LED</title><link href="http://localhost:4000/ddp/2021/c1-piscaLED/" rel="alternate" type="text/html" title="C1 - Pisca LED" /><published>2021-04-12T20:02:21-03:00</published><updated>2021-04-12T20:02:21-03:00</updated><id>http://localhost:4000/ddp/2021/c1-piscaLED</id><content type="html" xml:base="http://localhost:4000/ddp/2021/c1-piscaLED/">&lt;h1 id=&quot;pisca-led&quot;&gt;Pisca LED&lt;/h1&gt;

&lt;p&gt;Uma prática costumeira em programação, sempre que se testa a compilação em um projeto novo, é exibir na tela a mensagem &lt;em&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;Hello world&quot;&lt;/code&gt;&lt;/em&gt; ou em português &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;Ola mundo&quot;&lt;/code&gt;. Tal prática ocorre pelo fato de que, exibir uma mensagem na saída padrão, que geralmente é o monitor, é o programa mínimo funcional que se pode executar em um computador.&lt;/p&gt;

&lt;p&gt;Em um sistema microcontrolado, o programa equivalente ao &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;Ola mundo&quot;&lt;/code&gt; é o acionamento intermitente de uma dispositivo de sinalização em uma saída digital, ou seja, fazer um LED conectado a uma pino piscar: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pisca LED&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Assim, o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pisca LED&lt;/code&gt; ou &lt;em&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Blink LED&lt;/code&gt;&lt;/em&gt; é o programa mínimo e ponto de partida no estudo dos sistemas microcontrolados, e de extrema importância por testar a compilação do programa (&lt;em&gt;firmware&lt;/em&gt;), sua gravação no dispositivo alvo e ao menos uma parte do circuito em sua execução, validando o processo de compilação, gravação e execução.&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Acionar um LED de forma que ‘pisque’ com frequência de 1Hz.&lt;/p&gt;

&lt;h2 id=&quot;conteúdo&quot;&gt;Conteúdo&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Estrutura básica de um programa;&lt;/li&gt;
  &lt;li&gt;Comentários;&lt;/li&gt;
  &lt;li&gt;Diretivas de configuração;&lt;/li&gt;
  &lt;li&gt;Inclusão de biblioteca padrão;&lt;/li&gt;
  &lt;li&gt;Programa principal;&lt;/li&gt;
  &lt;li&gt;Configuração e acionamento de pino como saída.&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;circuito-hardware&quot;&gt;Circuito (&lt;a href=&quot;https://github.com/JoseWRPereira/ucPICsimulIDE/tree/master/sim_LED&quot;&gt;&lt;em&gt;Hardware&lt;/em&gt;&lt;/a&gt;)&lt;/h2&gt;

&lt;p&gt;O dispositivo responsável por acionar o LED é o microcontrolador(uC), através de um pino configurado como saída. Este pino pode estar fornecendo corrente como fonte (&lt;em&gt;source&lt;/em&gt;) ao ramo ou drenando (&lt;em&gt;sink&lt;/em&gt;) corrente dele.&lt;/p&gt;

&lt;p&gt;As configurações como fonte e dreno são mostradas na Figura 1 respectivamente em (a) e (b).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1(a): Ligação de pino como fonte (&lt;em&gt;source&lt;/em&gt;)&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1(b): Ligação de pino como dreno (&lt;em&gt;sink&lt;/em&gt;)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/P0101-piscaLEDsource.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/P0101-piscaLEDsink.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O pino do uC possui limitação de corrente, que pode variar a depender do modelo ou fabricante.&lt;/p&gt;

&lt;p&gt;O uC aqui utilizado, PIC16F887, possui &lt;strong&gt;corrente máxima de 25mA por pino&lt;/strong&gt;, tanto como &lt;strong&gt;fonte&lt;/strong&gt; quanto como &lt;strong&gt;dreno&lt;/strong&gt;, conforme indica o seu &lt;a href=&quot;http://ww1.microchip.com/downloads/en/devicedoc/41291d.pdf&quot;&gt;datasheet&lt;/a&gt; (seção &lt;em&gt;17.0 Electrical especifications&lt;/em&gt;, página 241).&lt;/p&gt;

&lt;p&gt;Note que apesar de cada pino possuir uma corrente máxima, outra limitação é que a somatória dessas corrente não pode ultrapassar &lt;strong&gt;200mA&lt;/strong&gt; para o conjunto dos pinos do &lt;strong&gt;PORTA, PORTB e PORTE&lt;/strong&gt;.
Bem como para o &lt;strong&gt;PORTC e PORTD&lt;/strong&gt; também limitado a &lt;strong&gt;200mA&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Como em ambas as ocasiões a corrente máxima é a mesma, não existe uma predileção por uma configuração de montagem ou outra. Tal predileção ocorre quando a capacidade combinada de uma configuração é maior do que a outra, normalmente drenar corrente é a condição mais comum.&lt;/p&gt;

&lt;p&gt;Para o uC aqui abordado, ambas as formas de ligação possuem as mesmas condições, não havendo diferença em capacidade de condução para o pino como fonte ou dreno.&lt;/p&gt;

&lt;p&gt;A vantagem de utilizar o pino como fonte é trabalhar com uma lógica direta, em que o estado lógico 1(verdadeiro, +5V) produz o acionamento do LED, enquanto que na configuração do pino como dreno a lógica de acionamento é invertida, pois o pino em estado lógico 0(falso, 0V) produz o acionamento do LED.&lt;/p&gt;

&lt;h2 id=&quot;programa-firmware&quot;&gt;Programa (&lt;a href=&quot;https://github.com/JoseWRPereira/ucPICsimulIDE/tree/master/c1_piscaLED.X&quot;&gt;&lt;em&gt;Firmware&lt;/em&gt;&lt;/a&gt;)&lt;/h2&gt;

&lt;p&gt;O programa em microcontrolador é denominado &lt;em&gt;firmware&lt;/em&gt;, assim como para computador é denominado &lt;em&gt;software&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Um único arquivo de código fonte (&lt;em&gt;Source Files&lt;/em&gt;) é criado nesse projeto, como pode-se ver na Figura 2, denominado &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Árvore de diretório do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/projectTree.png?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;É uma boa prática nomear o arquivo fonte com o nome &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt; quando ele possuir a função principal do programa, que possui o mesmo nome. Os demais arquivos fonte devem possuir nomes relacionados às funções que eles contém.&lt;/p&gt;

&lt;p&gt;Segue o código fonte para o projeto Pisca LED.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/*
 * File:   main.c
 * Author: josewrpereira
 *
 * Created on 12 April 2021, 19:39
 * 
 * IDE:         MPLAB X IDE v5.45
 * Compiler:    XC8 v2.31
 * Operating System: Debian GNU/Linux bullseye/sid
 * Kernel: Linux 5.10.0-5-amd64
 * Architecture: x86-64
 * 
 * Objetivo: 
 *      Piscar o LED com intervalo de 500 ms
 * 
 * Pinos    |nº     |Conexão
 *  VDD     |11,32  | Alimentação (Vcc/+5V)
 *  VSS     |12,31  | Alimentação (GND/0V)
 *  RD0     |19     | LED (source/sink)
 */&lt;/span&gt;

                                &lt;span class=&quot;c1&quot;&gt;// Inclui diretivas de configuração do uC&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// CONFIG1&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma config FOSC = INTRC_NOCLKOUT// Oscillator Selection bits (INTOSCIO oscillator: I/O function on RA6/OSC2/CLKOUT pin, I/O function on RA7/OSC1/CLKIN)
#pragma config WDTE = OFF       // Watchdog Timer Enable bit (WDT disabled and can be enabled by SWDTEN bit of the WDTCON register)
#pragma config PWRTE = OFF      // Power-up Timer Enable bit (PWRT disabled)
#pragma config MCLRE = OFF      // RE3/MCLR pin function select bit (RE3/MCLR pin function is digital input, MCLR internally tied to VDD)
#pragma config CP = OFF         // Code Protection bit (Program memory code protection is disabled)
#pragma config CPD = OFF        // Data Code Protection bit (Data memory code protection is disabled)
#pragma config BOREN = OFF      // Brown Out Reset Selection bits (BOR disabled)
#pragma config IESO = OFF       // Internal External Switchover bit (Internal/External Switchover mode is disabled)
#pragma config FCMEN = OFF      // Fail-Safe Clock Monitor Enabled bit (Fail-Safe Clock Monitor is disabled)
#pragma config LVP = OFF        // Low Voltage Programming Enable bit (RB3 pin has digital I/O, HV on MCLR must be used for programming)
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// CONFIG2&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma config BOR4V = BOR40V   // Brown-out Reset Selection bit (Brown-out Reset set to 4.0V)
#pragma config WRT = OFF        // Flash Program Memory Self Write Enable bits (Write protection off)
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;xc.h&amp;gt;                 // Inclui biblioteca padrão do compilador XC8 
&lt;/span&gt;                                &lt;span class=&quot;c1&quot;&gt;// para microcontroladores Microchip.&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#define _XTAL_FREQ 4000000      // Define frequência do oscilador em uso.
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                 &lt;span class=&quot;c1&quot;&gt;// Função principal = main.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                               &lt;span class=&quot;c1&quot;&gt;// Início do escopo da função main.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// Inicia RD0 com o valor 0.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRISD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// Configura RD0 como Saída.&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                  &lt;span class=&quot;c1&quot;&gt;// Laço de repetição infinito.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// Inicio do escopo do laço de repetição.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// Liga RD0.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;__delay_ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// Espera 500 ms.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// Desliga RD0.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;__delay_ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// Espera 500 ms.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// Fim do escopo laço de repetição.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                     &lt;span class=&quot;c1&quot;&gt;// Caracteriza main como uma função sem retorno.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                               &lt;span class=&quot;c1&quot;&gt;// Fim do escopo da função main.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;estrutura-do-programa&quot;&gt;Estrutura do programa&lt;/h2&gt;

&lt;p&gt;O programa presente no arquivo fonte &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.c&lt;/code&gt; possui o seguinte arranjo:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Comentários;&lt;/li&gt;
  &lt;li&gt;Diretivas de configuração;&lt;/li&gt;
  &lt;li&gt;Inclusão de bibliotecas;&lt;/li&gt;
  &lt;li&gt;Diretivas de compilação;&lt;/li&gt;
  &lt;li&gt;Definições úteis ao programa;&lt;/li&gt;
  &lt;li&gt;Programa principal.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;comentários&quot;&gt;Comentários&lt;/h3&gt;

&lt;p&gt;Os comentários são trechos do código que não são compilados e servem para auxiliar na compreesão do código.&lt;/p&gt;

&lt;p&gt;Os comentários são importantes para evidenciar ou explicar trechos de código que não são explícitos, de forma a garantir uma boa compreensão para quem venha a estudar o código, ou ainda evidenciar a identificação do projeto, do autor, informações de versão de interfaces e  compiladores utilizados para criar o projeto, seu objetivo e um mapa simplificado de alocação de pinos, como usado no código aqui apresentado.&lt;/p&gt;

&lt;p&gt;Em linguagem C os comentátios podem ser feitos em &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bloco&lt;/code&gt; ou em &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;linha&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Bloco&lt;/strong&gt;: tem como delimitador inicial &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/*&lt;/code&gt; e o final &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*/&lt;/code&gt;. Todo o conteúdo entre os delimitadores não são considerados pelo compilador, sendo úteis apenas para os programadores.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Linha&lt;/strong&gt;: a marcação &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;//&lt;/code&gt; indica que todo o conteúdo à direita até o fim da linha é comentário, e da mesma forma não é considerado pelo compilador.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Uma das informações possíveis para inserir nos comentários e que considero ser útil é mostrar quais pinos são usados e em qual aplicação, como um mapa de alocação de pinos, conforme segue:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;cm&quot;&gt;/*
 * Pinos    |nº     |Conexão
 *  VDD     |11,32  | Alimentação (Vcc/+5V)
 *  VSS     |12,31  | Alimentação (GND/0V)
 *  RD0     |19     | LED (source/sink)
*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;diretivas-de-configuração&quot;&gt;Diretivas de configuração&lt;/h3&gt;

&lt;p&gt;Algumas diretivas como &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#pragma&lt;/code&gt; possibilitam um método de disponibilizar informaçẽos direto ao compilador, como por exemplo o acesso a registradores de configuração do microcontrolador, que ocorrem de forma exclusiva durante a gravação do código.&lt;/p&gt;

&lt;p&gt;Existem diversas configurações possíveis, inicialmente usaremos as seguintes configurações:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// CONFIG1&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma config FOSC = INTRC_NOCLKOUT// Oscillator Selection bits (INTOSCIO oscillator: I/O function on RA6/OSC2/CLKOUT pin, I/O function on RA7/OSC1/CLKIN)
#pragma config WDTE = OFF       // Watchdog Timer Enable bit (WDT disabled and can be enabled by SWDTEN bit of the WDTCON register)
#pragma config PWRTE = OFF      // Power-up Timer Enable bit (PWRT disabled)
#pragma config MCLRE = OFF      // RE3/MCLR pin function select bit (RE3/MCLR pin function is digital input, MCLR internally tied to VDD)
#pragma config CP = OFF         // Code Protection bit (Program memory code protection is disabled)
#pragma config CPD = OFF        // Data Code Protection bit (Data memory code protection is disabled)
#pragma config BOREN = OFF      // Brown Out Reset Selection bits (BOR disabled)
#pragma config IESO = OFF       // Internal External Switchover bit (Internal/External Switchover mode is disabled)
#pragma config FCMEN = OFF      // Fail-Safe Clock Monitor Enabled bit (Fail-Safe Clock Monitor is disabled)
#pragma config LVP = OFF        // Low Voltage Programming Enable bit (RB3 pin has digital I/O, HV on MCLR must be used for programming)
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// CONFIG2&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#pragma config BOR4V = BOR40V   // Brown-out Reset Selection bit (Brown-out Reset set to 4.0V)
#pragma config WRT = OFF        // Flash Program Memory Self Write Enable bits (Write protection off)
&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Um destaque para a primeira linha em que o registrador &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FOSC&lt;/code&gt; é configurado para o oscilador interno. Por uma questão de simplificação de montagem inicial do circuito, optou-se por tal configuração por não necessitar de um cristal oscilador e seus capacitores conectados externamente junto aos pinos 13 e 14. A limitação dessa escolha é que a frequência do oscilador interno, que por padrão é de 4MHz, atinge no máximo 8MHz, enquanto que ao utilizar um cristal externo pode-se trabalhar com até 20MHz, e a tolerância de calibração do oscilador interno pode variar em função da temperatura, o que não afeta nossas aplicações didáticas.&lt;/p&gt;

&lt;h3 id=&quot;inclusão-de-bibliotecas&quot;&gt;Inclusão de bibliotecas&lt;/h3&gt;

&lt;p&gt;O código &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#include &amp;lt;xc.h&amp;gt;&lt;/code&gt; inclui a biblioteca padrão do compilador XC8 para microcontroladores Microchip, de modo a oferecer funções básicas e as definições ou nomenclaturas dos registradores.&lt;/p&gt;

&lt;p&gt;Todas as definições como &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTDbits.RD0&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TRISDbits.TRISD0&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FOSC&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WDTE&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__delay_ms()&lt;/code&gt; estão declaradas ou &lt;em&gt;linkadas&lt;/em&gt; em &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xc.h&lt;/code&gt;, assim sendo uma biblioteca obrigatória para nosso uso.&lt;/p&gt;

&lt;h3 id=&quot;definições-úteis-ao-programa&quot;&gt;Definições úteis ao programa&lt;/h3&gt;

&lt;p&gt;A diretiva &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#define&lt;/code&gt;, como o próprio nome indica, define um “apelido” para um valor. Esse apelido é substituido pelo real valor antes da compilação do código pelo pré-processador, de modo que apenas faz sentido para o programador.&lt;/p&gt;

&lt;p&gt;A grande vantagem é que ao utilizar um valor muitas vezes durante o código pode-se alterá-lo falcilmente se ele possuir um &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#define&lt;/code&gt; associado. Suponha um código que utiliza um valor constante em seus cálculos, e é definido como &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#define PI 3.14&lt;/code&gt;. Dorante os cáculos usa-se o “apelido” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PI&lt;/code&gt; (… PI * raio … ), e ele aparece imuneras vezes no programa. Daí você programador percebe que precisa aumentar a precisão dos cálculos, e esta aproximação com duas casas decimais não é mais suficiente, agora são necessárias cinco casas decimais. Seria penoso demais procurar por todas as inserções do PI no código para mudá-los um a um, além do fato de ser muito provavel a inserção de erros. Com o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#define&lt;/code&gt; basta mudar na sua declaração para &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#define PI 3.14159&lt;/code&gt;, que o pré-processador substitui em todos os lugares que foi utilizado o seu “apelido”.&lt;/p&gt;

&lt;p&gt;A definição &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_XTAL_FREQ&lt;/code&gt; deve assumir o valor do oscilador que estiver sendo utilizado na configuração, neste caso, o oscilador interno com o valor padrão é 4MHz.&lt;/p&gt;

&lt;p&gt;Essa definição é importante sempre que for utilizada alguma função que envolva contagem de tempo, como a função &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__delay_ms()&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;programa-principal&quot;&gt;Programa principal&lt;/h3&gt;

&lt;p&gt;Todo programa em linguagem C deve possuir uma &lt;strong&gt;função principal&lt;/strong&gt;, cujo nome é obrigatório &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt;&lt;/strong&gt;. 
As demais funções devem possuir nomes de acordo com a tarefa que executam, mas são de total responsabilidade do programador.&lt;/p&gt;

&lt;p&gt;Como no microcontrolador não há um sistema operacional para invocar a execução do programa, a função principal não necessita de um retorno, bem como não possui argumentos de entrada. 
Para indicar essa ausência de parâmetros usa-se a palavra reservada &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;void&lt;/code&gt; que significa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vazio&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                               &lt;span class=&quot;c1&quot;&gt;// Início do escopo da função main.&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                     &lt;span class=&quot;c1&quot;&gt;// Caracteriza main como uma função sem retorno.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                               &lt;span class=&quot;c1&quot;&gt;// Fim do bloco da função main.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;parametrizar-habilitar-e-inicializar&quot;&gt;Parametrizar, habilitar e inicializar&lt;/h4&gt;

&lt;p&gt;A estrutura básica do programa para o microcontrolador(&lt;em&gt;firmware&lt;/em&gt;) consiste em dois blocos de código, sendo o primeiro para a configuração e o segundo para executar as funções do programa.&lt;/p&gt;

&lt;p&gt;O bloco de configuração consiste em parametrizar, habilitar e/ou inicializar os periféricos e dados utilizados no programa.&lt;/p&gt;

&lt;p&gt;O bloco para as funções do programa consiste no código que normalmente é executado de forma repetida enquanto o sistema estiver em execução, ou seja, enquanto o microcontrolador estiver ligado.&lt;/p&gt;

&lt;p&gt;O programa aqui apresentado utiliza o pino D0 do PORTD do microcontrolador por ser o PORT mais fácil de trabalhar.&lt;/p&gt;

&lt;div class=&quot;alert alert-primary&quot; role=&quot;alert&quot;&gt;
&lt;h4 class=&quot;alert-heading&quot;&gt;Como esse pino é parametrizado, habilitado e inicializado?&lt;/h4&gt;

&lt;/div&gt;

&lt;div class=&quot;alert alert-primary&quot; role=&quot;alert&quot;&gt;
&lt;h4 class=&quot;alert-heading&quot;&gt;Como configurar o pino como saída?&lt;/h4&gt;

&lt;/div&gt;

&lt;h4 id=&quot;registradores&quot;&gt;Registradores&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Todos os pinos&lt;/strong&gt; estão conectados ao menos em um &lt;strong&gt;circuito específico&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Cada circuito específico realiza funções como, entrada digital, saída digital, contadores, comunicação, leitura de sinal analógico, etc, e são chamados de &lt;strong&gt;periféricos&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Todos os periféricos, são configurados por sinais elétricos em portas específicas, e tais sinais podem ser acessados através do mapeamento deles em um conjunto de registradores denominados &lt;strong&gt;Registradores de Funções Especiais&lt;/strong&gt; (&lt;em&gt;SFR - Special Function Register&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;A Figura 3 mostra o mapa de registradores do PIC16F887 e pode ser acessada na página 25 do seu &lt;a href=&quot;http://ww1.microchip.com/downloads/en/devicedoc/41291d.pdf&quot;&gt;&lt;em&gt;datasheet&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Mapa dos Registradores de Funções Especiais (&lt;em&gt;SFR&lt;/em&gt;)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/sfr-PIC16F886-7.png?raw=true&quot; alt=&quot;SFR     &quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Fonte: &lt;em&gt;Datasheet&lt;/em&gt; do PIC16F887&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Em destaque estão os registradores &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTD&lt;/code&gt; e &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TRISD&lt;/code&gt;, que são os responsáveis pela configuração e manipulação dos pinos conectados ao PORTD, entre eles o pino &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;D0&lt;/code&gt; em que está conectado o ramo do circuito com o LED.&lt;/p&gt;

&lt;p&gt;A Figura 4 mostra a representação do registrador &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTD&lt;/code&gt;, utilizado para acessar (ler ou escrever) os pinos nele associado, como o pino 19 ou RD0 do microcontrolador.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Registrador PORTD&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/portdreg.png?raw=true&quot; alt=&quot;PORTDreg&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Fonte: &lt;em&gt;Datasheet&lt;/em&gt; do PIC16F887&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O PORTD possui 8 bits acessíveis individualmente e independentes, como indicado pelo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;R/W&lt;/code&gt; acima do nome de cada bit, respectivamente cada bit pode ser lido ou escrito.&lt;/p&gt;

&lt;p&gt;O &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt; significa que o valor de &lt;em&gt;reset&lt;/em&gt; é desconhecido, podendo ser 0 ou 1, mas não é possível afirmar qual valor que estará cada bit ao ligar ou religar o microcontrolador.&lt;/p&gt;

&lt;p&gt;Ao &lt;em&gt;setar&lt;/em&gt; qualquer um dos bits do registrador com a instrução &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTDbits.RDn = 1;&lt;/code&gt; sendo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; o número do bit que se está manipilando, o respectivo pino assume a tensão de alimentação do chip, +5V.&lt;/p&gt;

&lt;p&gt;Ao &lt;em&gt;resetar&lt;/em&gt; qualquer um dos bits do registrador com a instrução &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTDbits.RDn = 0;&lt;/code&gt; sendo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; o número do bit que se está manipilando, o respectivo pino assume o valor de 0V.&lt;/p&gt;

&lt;p&gt;Para realizar a leitura do pino, pode-se utilizar o seguinte comando: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;var = PORTDbits.RDn;&lt;/code&gt;, sendo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; o número do bit acessado e &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;var&lt;/code&gt; a variável que recebe o estado do pino acessado.&lt;/p&gt;

&lt;p&gt;Os dois estados lógicos são representados com os valores booleanos 0 e 1 e tais estados são assumidos quando a tensão no pino está dentro de um determinado intervalo de tensão:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2,0V &amp;lt; Nível Lógico Alto &amp;lt; 5.0V&lt;/li&gt;
  &lt;li&gt;0,0V &amp;lt; Nível Lógico Baixo &amp;lt; 0,8V&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Note que para o intervalo entre 0,8 e 2,0, não há um estado bem definido, assim não é possível garantir para qual estado lógico será interpretada a leitura do pino.&lt;/p&gt;

&lt;p&gt;As ações de &lt;em&gt;setar&lt;/em&gt; e &lt;em&gt;resetar&lt;/em&gt; somente são válidas se o pino estiver configurado como saída de dados. A ação de ler o estado do pino pode ser feita independente de configuração, seja entrada ou saída.&lt;/p&gt;

&lt;p&gt;Para a configuração da direção de dados em um pino do &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PORTD&lt;/code&gt;, utiliza-se o registrador &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TRISD&lt;/code&gt;, conforme mostrado na Figura 5.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Registrador TRISD&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/trisdreg.png?raw=true&quot; alt=&quot;TRISDreg&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Fonte: &lt;em&gt;Datasheet&lt;/em&gt; do PIC16F887 pág. 57&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O TRISD possui 8 bits acessíveis para leitura ou escrita individualmente e independentes, como indicado pelo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;R/W&lt;/code&gt; acima do nome de cada bit. 
O &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-1&lt;/code&gt; significa que o valor de &lt;em&gt;reset&lt;/em&gt; é &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;, ou seja, todos os pinos são inicializados como entrada ao ligar o uC.&lt;/p&gt;

&lt;p&gt;Um pino do PORTD pode ser configurado como entrada de dados com a seguinte instrução: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TRISDbits.TRISDn = 1;&lt;/code&gt;, onde &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; é o número do bit que está se configurando.&lt;/p&gt;

&lt;p&gt;Para a configuração do pino como saída pode-se utilizar o seguinte comando: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TRISDbits.TRISDn = 0;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Tais registradores são um mapeamento do circuito da Figura 6, conforme segue.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Diagrama dos pinos RD&amp;lt;4:0&amp;gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/portD4-0_diagrama.png?raw=true&quot; alt=&quot;DiagramaRD0-4&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Fonte: &lt;em&gt;Datasheet&lt;/em&gt; do PIC16F887 pág. 58&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Note que as ações de escrita e leitura de determinados registradores produzem sinais de controle (borda de descida no biestável) no circuito do respectivo pino.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;O terminal &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WR PORTD&lt;/code&gt; é acionado quando a ação de escrita no PORTD ocorre.&lt;/li&gt;
  &lt;li&gt;O mesmo ocorre para &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WR TRISD&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Para a ação de leitura do registrador, é gerado um sinal de acionamento em &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RD TRISD&lt;/code&gt; ou &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RD PORTD&lt;/code&gt;, respectivamente.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Os comandos de escrita acionam biestáveis (&lt;em&gt;flip-flops&lt;/em&gt;) para armazenar a configuração ou o último dado escrito no pino.&lt;/p&gt;

&lt;p&gt;Para a leitura há apenas &lt;em&gt;buffers&lt;/em&gt; de acesso ao dado do pino mediante os sinais de controle.&lt;/p&gt;

&lt;p&gt;As instruções de inicialização e configuração são apresentados abaixo e cada linha está ilustrada nas Figuras 7 e 8 em seguida:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-C&quot;&gt;    PORTDbits.RD0 = 0;          // Inicia RD0 com o valor 0.
    TRISDbits.TRISD0 = 0;       // Configura RD0 como Saída.
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Inicialização do pino RD0-4&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 8: Configuração do RD0-4 como saída&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/portD0_0.png?raw=true&quot; alt=&quot;PORTD0-0&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/trisd0_0.png?raw=true&quot; alt=&quot;TRISD0-0&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Fonte: &lt;em&gt;Datasheet&lt;/em&gt; do PIC16F887 pág. 58&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Fonte: &lt;em&gt;Datasheet&lt;/em&gt; do PIC16F887 pág. 58&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;ao-infinito-e-além&quot;&gt;Ao infinito e além&lt;/h3&gt;
&lt;p&gt;A condição mais comum é que o programa fique sendo executado de forma repetida durante todo o período em que o microcontrolador estiver ligado, assim utiliza-se um laço de repetição com uma condição que é verdadeira sempre.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-C&quot;&gt;    while( 1 )                  // Laço de repetição infinito.
    {                           // Inicio do laço de repetição.
      /*Aqui vai o seu programa*/
    }                           // Fim do laço de repetição.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note que em linguagem C, para uma &lt;strong&gt;variável numérica&lt;/strong&gt;, &lt;strong&gt;todo valor diferente de zero&lt;/strong&gt; possui o estado lógico &lt;strong&gt;1&lt;/strong&gt; (verdadeiro), enquanto que &lt;strong&gt;apenas o zero&lt;/strong&gt; possui o estado lógico &lt;strong&gt;0&lt;/strong&gt; (falso).&lt;/p&gt;

&lt;p&gt;Após a configuração do pino e sua inicialização, dentro do loop infinito é inserida a sequência de passos que atende ao objetivo proposto.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Acionar RD0, ligando o LED;&lt;/li&gt;
  &lt;li&gt;Produzir um atraso de 500ms;&lt;/li&gt;
  &lt;li&gt;Desacionar RD0, desligando o LED;&lt;/li&gt;
  &lt;li&gt;Produzir um atraso de 500ms.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Codificando esses passos temos:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// Liga RD0.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;__delay_ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// Espera 500 ms.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;PORTDbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RD0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// Desliga RD0.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;__delay_ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// Espera 500 ms.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Os quatro passos completam o ciclo de acionamento do LED, e então este ciclo se repete em função do laço a qual ele está inserido, garantindo assim a correta execução e atendendo ao objetivo inicial de acionar o LED de forma intermitente com frequẽncia de 1Hz, ou seja, 500ms ligado e o mesmo tempo desligado.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Ligação de pino como fonte (&lt;em&gt;source&lt;/em&gt;)&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Ligação de pino como dreno (&lt;em&gt;sink&lt;/em&gt;)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/P0101-piscaLEDsource.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/c1-piscaLED/P0101-piscaLEDsink.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Agora é a sua vez!&lt;/p&gt;

&lt;p&gt;Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, faça alterações conscientes no código, explore, divirta-se.&lt;/p&gt;

&lt;p&gt;Ficou alguma dúvida, entre em contato.&lt;/p&gt;

&lt;p&gt;Bom trabalho!&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2021/config&quot;&gt;« Arquivo de Configuração (config.h) &lt;/a&gt; « C1 - Pisca LED » &lt;a href=&quot;/ddp/2021/c1-botaoLED&quot;&gt;C1 - Botão pulsador e LED »&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W R Pereira</name></author><category term="ucPIC" /><summary type="html">Pisca LED</summary></entry><entry><title type="html">Anexo D - Controle de Versão</title><link href="http://localhost:4000/ddp/2021/capD-versionamento/" rel="alternate" type="text/html" title="Anexo D - Controle de Versão" /><published>2021-04-10T18:14:21-03:00</published><updated>2021-04-10T18:14:21-03:00</updated><id>http://localhost:4000/ddp/2021/capD-versionamento</id><content type="html" xml:base="http://localhost:4000/ddp/2021/capD-versionamento/">&lt;h1 id=&quot;git-e-github&quot;&gt;Git e GitHub&lt;/h1&gt;

&lt;p&gt;Com o MPLAB-X é possível realizar o controle de versão dos projetos com algumas ferramentas específicas, entre elas o Git, e fazer a conexão com um repositório remoto, como o GitHub.&lt;/p&gt;

&lt;p&gt;O Git é uma ferramenta de controle de versão que será aqui utilizada num recorte bem simples e básica, não sendo o intuito ensinar seu uso amplo ou profundo.&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Utilizar o Git e o GitHub, através do MPLAB-X, para fazer o controle de versão de um projeto.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;criando-a-conta-no-github&quot;&gt;Criando a conta no GitHub&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Acesse o site: &lt;a href=&quot;https://github.com/&quot;&gt;https://github.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: Plataforma GitHub&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/01.png?raw=true&quot; alt=&quot;Plataforma GitHub&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Se ainda não possuir uma conta, clique em &lt;strong&gt;&lt;em&gt;Sign up&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Se já possuir uma conta, clique em &lt;strong&gt;&lt;em&gt;Sign in&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Criar uma conta&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/02.png?raw=true&quot; alt=&quot;Criar uma conta&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Preencha os campos indicados:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Username&lt;/em&gt;&lt;/strong&gt; : Nome de usuário. O nome que vai te identificar na plataforma;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Email address&lt;/em&gt;&lt;/strong&gt;: Inserir o endereço do seu e-mail para realizar a validação de usuário;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Password&lt;/em&gt;&lt;/strong&gt;: Criar uma senha para acessar a plataforma;&lt;/li&gt;
  &lt;li&gt;Faça o teste que verifica que você não é um robô;&lt;/li&gt;
  &lt;li&gt;Se você passou do teste anterior, clique em &lt;strong&gt;&lt;em&gt;Create account&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;acessando-a-sua-conta&quot;&gt;Acessando a sua conta&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Acesse: &lt;a href=&quot;https://github.com/login&quot;&gt;https://github.com/login&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Campos de acesso&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/03.png?raw=true&quot; alt=&quot;Campos de acesso&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Insira o seu nome de usuário ou o endereço de e-mail;&lt;/li&gt;
  &lt;li&gt;Insira a sua senha;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Sign in&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ao acessar a plataforma do GitHub, uma tela semelhante a Figura 4 é exibida.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Tela principal do GitHub&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/05.png?raw=true&quot; alt=&quot;Tela principal do GitHub&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Clique na identificação do usuário, no canto superior direito;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Your repositories&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Repositórios de projetos&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/06.png?raw=true&quot; alt=&quot;Repositórios de projetos&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Selecione a aba &lt;strong&gt;&lt;em&gt;Repositories&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;criando-um-novo-repositório&quot;&gt;Criando um novo repositório&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;New&lt;/em&gt;&lt;/strong&gt; para criar um novo repositório.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Criando um novo repositório&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/07.png?raw=true&quot; alt=&quot;Criando um novo repositório&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Inclua o nome do repositório do projeto em &lt;strong&gt;&lt;em&gt;Repository name&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Create repository&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Configuração do repositório&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/08.png?raw=true&quot; alt=&quot;Configuração do repositório&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Note que foi inserido um nome com erro de grafia.
Vamos corrigir a grafia do nome do repositório:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique na aba &lt;strong&gt;&lt;em&gt;Settings&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 8: Arquivo de cabeçalho&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/09.png?raw=true&quot; alt=&quot;Arquivo de cabeçalho&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Modifique a grafia em &lt;strong&gt;&lt;em&gt;Repository name&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Rename&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Outras configurações referentes ao projeto podem ser realizadas nessa aba, 
inclusive o arquivamento, a transferência ou a exclusão do projeto.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Volte para a aba &lt;strong&gt;&lt;em&gt;Code&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 9: Link de acesso ao repositório&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/10.png?raw=true&quot; alt=&quot;Link de acesso ao repositório&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Copie o link que está em destaque, ele será usado posteriormente.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;inicializando-o-repositório-com-o-projeto&quot;&gt;Inicializando o repositório com o projeto&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Abra o MPLAB-X com o projeto que deve ser incluído no repositório remoto (GitHub);&lt;/li&gt;
  &lt;li&gt;Selecione o projeto;&lt;/li&gt;
  &lt;li&gt;Clique em: &lt;strong&gt;&lt;em&gt;Team&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Git&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Initialize Repository&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 10: Caminho de inicialização do respositório no GitHub&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/11.png?raw=true&quot; alt=&quot;Caminho de inicialização do respositório no GitHub&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Verifique o caminho do projeto que será conectado ao repositório.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 11: Caminho do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/12.png?raw=true&quot; alt=&quot;Caminho do projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Ao clicar em &lt;strong&gt;&lt;em&gt;OK&lt;/em&gt;&lt;/strong&gt;, note que a árvore do projeto ficou com alguns arquivos na cor verde e apareceu uma pequena marca junto ao ícone do nome do projeto.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 12: Árvore do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/13.png?raw=true&quot; alt=&quot;Árvore do projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A cor verde dos arquivos, indica que são novos, ainda não incluídos ao controle de versão, definido conforme a Figura 13 como &lt;strong&gt;&lt;em&gt;untracked&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Obs.: O &lt;em&gt;set&lt;/em&gt; de cores depende das configurações do MPLAB-X.&lt;/p&gt;

&lt;p&gt;A Figura 13 mostra uma simplificação do fluxo de trabalho com o Git e com o GitHub.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 13: Ciclo básico Git e GitHub&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/basico-GitGithub.png?raw=true&quot; alt=&quot;Ciclo básico Git e GitHub&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Ainda com o projeto selecionado, vamos incluir os arquivos sob o controle do Git.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em: &lt;strong&gt;&lt;em&gt;Team&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Add&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 14: Inclusão de arquivos&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/14.png?raw=true&quot; alt=&quot;Inclusão de arquivos&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Com os arquivos presentes no Git (&lt;strong&gt;&lt;em&gt;staged&lt;/em&gt;&lt;/strong&gt;), é necessário agora vinculá-los (&lt;strong&gt;&lt;em&gt;commit&lt;/em&gt;&lt;/strong&gt;), ou seja, produzir uma versão com as modificações adicionadas (&lt;strong&gt;&lt;em&gt;Unmodified&lt;/em&gt;&lt;/strong&gt;).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em: &lt;strong&gt;&lt;em&gt;Team&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Commit&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 15: Comentário para o vínculo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/15.png?raw=true&quot; alt=&quot;Comentário para o vínculo&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Escreva na caixa de mensagem um texto que deixe claro o que foi alterado ou adicionado ao projeto.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 16: Caixa de mensagem de vínculo, &lt;em&gt;commit&lt;/em&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/16.png?raw=true&quot; alt=&quot;Caixa de mensagem de vínculo, commit&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Essa descrição é fundamental para a construção do histórico de desenvolvimento do projeto, pois entre outras coisas, permite o resgate de uma versão num ponto determinado se bem documentado.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em: &lt;strong&gt;&lt;em&gt;Commit&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Na árvore de projetos, note que todos os arquivos ficaram pretos, indicando que estão salvos e vinculados pelo Git, na condição &lt;strong&gt;&lt;em&gt;unmodified&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 17: Árvore do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/17.png?raw=true&quot; alt=&quot;Árvore do projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A partir desse ponto, ao editar um arquivo, com novas inserções, novas funcionalidades, comentários, etc, ele se torna &lt;strong&gt;&lt;em&gt;modified&lt;/em&gt;&lt;/strong&gt; e precisa ser adicionado (&lt;strong&gt;&lt;em&gt;add&lt;/em&gt;&lt;/strong&gt;), e vinculado (&lt;strong&gt;&lt;em&gt;commit&lt;/em&gt;&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;Os arquivos e subdiretórios na condição &lt;strong&gt;&lt;em&gt;unmodified&lt;/em&gt;&lt;/strong&gt; são copiados para o repositório remoto, que nesse caso é o GitHub.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em: &lt;strong&gt;&lt;em&gt;Team&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Remote&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Push&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 18: Caminho para acesso remoto ao GitHub&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/18.png?raw=true&quot; alt=&quot;Caminho para acesso remoto ao GitHub&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A tela de identificação do repositório remoto é aberta.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 19: Repositório remoto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/20.png?raw=true&quot; alt=&quot;Repositório remoto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Selecione &lt;em&gt;Specify Git Repository Location:&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;Selecione em &lt;em&gt;Remote Name&lt;/em&gt;: &lt;strong&gt;origin&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Insira o endereço do repositorio, copiado na Figura 10, em &lt;em&gt;Repository URL:&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;Insira o nome de usuário em &lt;em&gt;User:&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;Insira a senha do GitHub em &lt;em&gt;Password:&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;Next&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 20: Ramo local&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/21.png?raw=true&quot; alt=&quot;Ramo local&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Selecione a caixa de marcação &lt;strong&gt;&lt;em&gt;master -&amp;gt; master[A]&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Quando o projeto possui outros “ramos” (&lt;em&gt;branches&lt;/em&gt;), eles vão aparecer aqui.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Selecione o ramo remoto que vai receber as atualizações.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 21 Local de atualização remoto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/22.png?raw=true&quot; alt=&quot;Local de atualização remoto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Selecione a caixa de marcação &lt;strong&gt;&lt;em&gt;master -&amp;gt; origin/master[A]&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Quando o projeto possui outros “ramos” (&lt;em&gt;branches&lt;/em&gt;), eles vão aparecer aqui.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Volte ao repositório do projeto no GitHub.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 22: Repositório do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/23.png?raw=true&quot; alt=&quot;Repositório do projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Os arquivos pertencentes ao projeto do MPLAB-X foram incluídos no repositório do GitHub. 
Note que a descrição de cada arquivo é o início da mensagem de vínculo, 
&lt;em&gt;commit message&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;leia-me--readme&quot;&gt;LEIA-ME / README&lt;/h2&gt;

&lt;p&gt;Uma parte fundamental ao se trabalhar com o GitHub é manter um arquivo de Leia-me (&lt;em&gt;README&lt;/em&gt;) bem feito e atualizado.&lt;/p&gt;

&lt;p&gt;Sua função é descrever o projeto, dando uma visão completa ao leitor que venha visitá-lo através da plataforma GitHub.&lt;/p&gt;

&lt;p&gt;O arquivo README pode ser escrito com o extensão &lt;strong&gt;.md&lt;/strong&gt;, arquivo no formato &lt;strong&gt;Markdown&lt;/strong&gt;, que é suportado pelo GitHub e facilita a criação de um arquivo de boa legibilidade.&lt;/p&gt;

&lt;p&gt;Muito material ensinando a utilizar o markdown pode ser encontrado na internet, 
mas segue um &lt;a href=&quot;https://docs.pipz.com/central-de-ajuda/learning-center/guia-basico-de-markdown#open&quot;&gt;Guia básico de markdown&lt;/a&gt; para começar.&lt;/p&gt;

&lt;p&gt;Para criar o arquivo de README.md:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 23: Novo arquivo vazio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/24.png?raw=true&quot; alt=&quot;Novo arquivo vazio&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Clique com o botão direito do &lt;em&gt;mouse&lt;/em&gt; em: &lt;strong&gt;&lt;em&gt;Header Files&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Selecione: &lt;strong&gt;&lt;em&gt;New&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Empty File…&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 24: Novo arquivo vazio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/25.png?raw=true&quot; alt=&quot;Novo arquivo vazio&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Insira o nome do arquivo: &lt;strong&gt;README.md&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Verifique o nome do projeto;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Finish&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;O arquivo &lt;strong&gt;README.md&lt;/strong&gt; está vazio, 
insira as informações relevantes sobre o projeto, 
e utilize as marcações do &lt;em&gt;markdown&lt;/em&gt;
para obter um arquivo de boa legibilidade.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 25: Arquivo README.md&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/26.png?raw=true&quot; alt=&quot;Arquivo README_md&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Note que o &lt;strong&gt;README.md&lt;/strong&gt; está como uma arquivo &lt;strong&gt;&lt;em&gt;untracked&lt;/em&gt;&lt;/strong&gt;.
Então, inclua ele no controle de versão (GIT).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 26: Adição do arquivo README.md ao controle de versão&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/28.png?raw=true&quot; alt=&quot;Adição do arquivo README.md ao controle de versão&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Para adicioná-lo é possível fazer o seguinte:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique com o botão direito do &lt;em&gt;mouse&lt;/em&gt; em: &lt;strong&gt;&lt;em&gt;README.md&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Selecione: &lt;strong&gt;&lt;em&gt;Git&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Add&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 27: Caixa de mensagem de vínculo, &lt;em&gt;commit&lt;/em&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/29.png?raw=true&quot; alt=&quot;Figura 27: Caixa de mensagem de vínculo, *commit*&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Insira uma mensagem de vículo para o README.md;&lt;/li&gt;
  &lt;li&gt;Clique no botão &lt;strong&gt;&lt;em&gt;Commit&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Como o repositório remoto está vinculado ao projeto local, 
é possível fazer o &lt;em&gt;upload&lt;/em&gt; (&lt;em&gt;push&lt;/em&gt;) de forma simplificada.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 28: Inclusão do README.md no repositório remoto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/30.png?raw=true&quot; alt=&quot;Inclusão do README.md no repositório remoto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em:&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Team&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Remote&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;Push to upstream&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;A atualização do arquivo no repositório remoto é feita de forma direta, sem a solicitação de identificação de acesso, pois já foi realizada, como pode-se ver no repositório do projeto no GitHub.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 29: Repositório do projeto no GitHub&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capD-versionamento/31.png?raw=true&quot; alt=&quot;Repositório do projeto no GitHub&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O arquivo &lt;strong&gt;README.md&lt;/strong&gt; é renderizado na tela principal do GitHub,
abaixo da lista de arquivos, facilitanto o seu acesso e visualização.&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2021/capC-novosArquivos&quot;&gt;« Anexo C - Novos arquivos&lt;/a&gt; « Anexo D - Controle de Versão » &lt;a href=&quot;/ddp/2021/config&quot;&gt;Arquivo de Configuração (config.h) »&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Git e GitHub</summary></entry><entry><title type="html">Anexo C - Novos Arquivos</title><link href="http://localhost:4000/ddp/2021/capC-novosArquivos/" rel="alternate" type="text/html" title="Anexo C - Novos Arquivos" /><published>2021-04-10T17:40:21-03:00</published><updated>2021-04-10T17:40:21-03:00</updated><id>http://localhost:4000/ddp/2021/capC-novosArquivos</id><content type="html" xml:base="http://localhost:4000/ddp/2021/capC-novosArquivos/">&lt;h1 id=&quot;arquivo-fonte-c-e-de-cabeçalho-h&quot;&gt;Arquivo fonte (.c) e de cabeçalho (.h)&lt;/h1&gt;

&lt;p&gt;Dentro de um projeto para microcontrolador, são criados basicamente arquivos fonte e de cabeçalho.&lt;/p&gt;

&lt;p&gt;Os arquivos &lt;strong&gt;fontes&lt;/strong&gt; são aqueles com extensão &lt;strong&gt;.c&lt;/strong&gt; e são escritos seguindo a sintaxe da linguagem de programação C, a mais utilizada para este tipo de aplicação.&lt;/p&gt;

&lt;p&gt;Os arquivos de &lt;strong&gt;cabeçalho&lt;/strong&gt; (&lt;em&gt;header&lt;/em&gt;) são aqueles com a extensão &lt;strong&gt;.h&lt;/strong&gt; e são utilizados como apresentação de funções em arquivos fontes diferentes de onde estão declaradas, permitindo assim que elas sejam invocadas (chamadas).&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Criar um arquivo fonte no projeto utilizando a plataforma MPLAB-X.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;criação-de-arquivo-fonte-c&quot;&gt;Criação de arquivo fonte &lt;strong&gt;.c&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;São vários os arquivos &lt;strong&gt;.c&lt;/strong&gt; em um projeto, mas todos são criados da mesma forma.&lt;/p&gt;

&lt;p&gt;A seguir a sequência para a criação de um arquivo &lt;strong&gt;.c&lt;/strong&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique com o botão direito do &lt;em&gt;mouse&lt;/em&gt; em &lt;strong&gt;&lt;em&gt;Source Files&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Selecione &lt;strong&gt;&lt;em&gt;New&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Em seguida selecione qualquer opção de arquivo com extensão &lt;strong&gt;.c&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: Novo arquivo fonte&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/01.png?raw=true&quot; alt=&quot;Novo arquivo fonte&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;No campo &lt;strong&gt;&lt;em&gt;File Name&lt;/em&gt;&lt;/strong&gt; digite o nome do arquivo. 	Não é necessário inserir a extensão, 	pois já está definido no campo abaixo.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Nome do arquivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/02.png?raw=true&quot; alt=&quot;Nome do arquivo&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Ao finalizar o arquivo fonte é aberto com algumas linhas inicializadas. 
Note que ele foi criado dentro do diretório de arquivos fonte, &lt;strong&gt;&lt;em&gt;Source Files&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Arquivo fonte&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/03.png?raw=true&quot; alt=&quot;Arquivo fonte&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O arquivo fonte criado pela IDE já possui algumas linhas inicializadas, e neste caso com um bloco de comentário no início do arquivo com algumas informações como o nome do arquivo, seu autor e data de sua criação.&lt;/p&gt;

&lt;p&gt;Em seguida temos a inclusão de biblioteca padrão, para os microcontroladores de 8 bits da Microchip, disponibilizada na instalação do compilador &lt;strong&gt;XC8&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Por fim uma função &lt;strong&gt;main&lt;/strong&gt; mínima.&lt;/p&gt;

&lt;p&gt;Caso o arquivo fonte criado não contenha a função &lt;strong&gt;main&lt;/strong&gt;, o que vai ser o mais comum, simplesmente apague-a e insira as funções do seu projeto.&lt;/p&gt;

&lt;h2 id=&quot;criação-de-arquivo-de-cabeçalho-h&quot;&gt;Criação de arquivo de cabeçalho &lt;strong&gt;.h&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;Normalmente para cada arquivo &lt;strong&gt;.c&lt;/strong&gt;, vai existir um arquivo correspondente &lt;strong&gt;.h&lt;/strong&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique com o botão esquerdo do &lt;em&gt;mouse&lt;/em&gt; no diretório &lt;strong&gt;&lt;em&gt;Header Files&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Selecione &lt;strong&gt;&lt;em&gt;New&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Selecione algum arquivo com extensão &lt;strong&gt;.h&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Novo cabeçalho&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/04.png?raw=true&quot; alt=&quot;Arquivo fonte&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O passo seguinte é inserir no campo &lt;em&gt;File Name&lt;/em&gt; o nome do arquivo.&lt;/p&gt;

&lt;p&gt;Note que a extensão deve estar com a seleção em &lt;strong&gt;.h&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Verifique se os campos &lt;em&gt;Project&lt;/em&gt; e &lt;em&gt;Created File&lt;/em&gt; estão com os valores corretos, com o nome do projeto ao qual esse arquivo que está sendo criado pertence e seu respectivo local.&lt;/p&gt;

&lt;p&gt;Estando tudo correto:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Finish&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Nome e local do arquivo de cabeçalho&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/05.png?raw=true&quot; alt=&quot;Nome e local do arquivo de cabeçalho&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O arquivo de cabeçalho é criado e vem com as condições de uso do software, 
produzidos pela Microchip.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Condições de uso do software&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/06.png?raw=true&quot; alt=&quot;Condições de uso do software&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Delete todo o conteudo do arquivo.
    &lt;ul&gt;
      &lt;li&gt;Você pode utilizar o atalho através da sequência de teclas: &lt;strong&gt;&lt;em&gt;Ctrl+A&lt;/em&gt;&lt;/strong&gt; e em seguida &lt;strong&gt;&lt;em&gt;Delete&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Insira o &lt;strong&gt;#ifndef&lt;/strong&gt; com o respectivo nome do arquivo, em letras maiúsculas, e finalizado com &lt;strong&gt;_H&lt;/strong&gt; no lugar do &lt;strong&gt;.h&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#ifndef ARQUIVOCABECALHO_H
#define ARQUIVOCABECALHO_H
&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;/* Inserir aqui os cabecalhos */&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#endif
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Agora é só inserir os protótipos de funções, definições de tipos, de acordo com a sua necessidade como programador.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Arquivo de cabeçalho&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capC-novosArquivos/07.png?raw=true&quot; alt=&quot;Arquivo de cabeçalho&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2021/capB-novoProjeto&quot;&gt;« Anexo B - Novo Projeto&lt;/a&gt; « Anexo C - Novos Arquivos » &lt;a href=&quot;/ddp/2021/capD-versionamento&quot;&gt;Anexo D - Controle de Versão »&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Arquivo fonte (.c) e de cabeçalho (.h)</summary></entry><entry><title type="html">Anexo B - Novo Projeto</title><link href="http://localhost:4000/ddp/2021/capB-novoProjeto/" rel="alternate" type="text/html" title="Anexo B - Novo Projeto" /><published>2021-04-10T17:27:21-03:00</published><updated>2021-04-10T17:27:21-03:00</updated><id>http://localhost:4000/ddp/2021/capB-novoProjeto</id><content type="html" xml:base="http://localhost:4000/ddp/2021/capB-novoProjeto/">&lt;h1 id=&quot;projeto&quot;&gt;Projeto&lt;/h1&gt;

&lt;p&gt;Um &lt;strong&gt;programa para o microcontrolador&lt;/strong&gt; é composto por &lt;strong&gt;diversos arquivos fontes, escritos em&lt;/strong&gt; alguma linguagem de programação, costumeiramente a &lt;strong&gt;linguagem C&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Esses &lt;strong&gt;arquivos são agrupados, organizados&lt;/strong&gt; e acompanhados de outros arquivos necessários para a construção de &lt;strong&gt;um projeto&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Um projeto é composto por arquivos fonte e de cabeçalho(&lt;strong&gt;.c e .h&lt;/strong&gt;), arquivos para sua construção (&lt;strong&gt;&lt;em&gt;makefile&lt;/em&gt;&lt;/strong&gt;) no processo de compilação, arquivos de montagem (&lt;strong&gt;&lt;em&gt;assembly&lt;/em&gt;&lt;/strong&gt;), diversos arquivos intermediários e por fim o arquivo executável (&lt;strong&gt;.hex&lt;/strong&gt;).&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Criar um novo projeto utilizando a plataforma MPLAB-X.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;mplab-x&quot;&gt;MPLAB-X&lt;/h2&gt;

&lt;p&gt;O ambiente de desenvolvimento integrada (&lt;em&gt;Integrated Development Environment&lt;/em&gt; - IDE) é uma ferramenta que reúne (integra) diversas funcionalidades de apoio ao desenvolvimento de aplicações ou projetos, tais como um editor de código, colorização e destaque de palavras reservadas, chamadas ao compilador, navegação entre os arquivos, entre outras funções.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: IDE Microchip MPLAB-X&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/01.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Para a criação de um novo projeto, basta seguir os passos apresentados pelo assistente de configuração do projeto, acessando-o conforme ilustração da Figura 2.&lt;/p&gt;

&lt;p&gt;Clique em: &lt;strong&gt;&lt;em&gt;File&lt;/em&gt;&lt;/strong&gt; -&amp;gt; &lt;strong&gt;&lt;em&gt;New Project&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Novo projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/02.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Na etapa seguinte é necessário escolher o tipo de projeto que será criado.&lt;/p&gt;

&lt;p&gt;Utilizaremos a opção &lt;strong&gt;&lt;em&gt;Standalone Project&lt;/em&gt;&lt;/strong&gt;, que geralmente já vem selecionada, bastando clicar em &lt;strong&gt;&lt;em&gt;Next&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Escolha do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/03.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Na próxima etapa são escolhidos a &lt;strong&gt;família&lt;/strong&gt; do microcontrolador, dentro dela o \textbf{dispositivo} e por fim a &lt;strong&gt;ferramenta&lt;/strong&gt; de gravação do dispositivo físico se for o caso, não sendo, pode-se usar a opção do simulador.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;Family&lt;/em&gt;: &lt;strong&gt;Mid-Range 8-bit MCUs&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Device&lt;/em&gt;: &lt;strong&gt;PIC16F887&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Tool&lt;/em&gt;: &lt;strong&gt;Simulator&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Seleção do dispositivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/04.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Obs.: No casso do campo &lt;em&gt;Device&lt;/em&gt;, a digitação do código do microcontrolador é mais prática e rápida do que sua escolha na caixa de opções.&lt;/p&gt;

&lt;p&gt;Selecione agora o compilador, que neste caso é o &lt;strong&gt;XC8&lt;/strong&gt;, conforme a instalação.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Seleção do compilador&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/05.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Insira agora o nome do projeto e atente-se para o local em que ele será salvo.&lt;/p&gt;

&lt;p&gt;O nome do projeto deve ter relação direta com a sua funcionalidade.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Nome do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/06.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Ao final a Figura 7 mostra a árvore do projeto criada, sendo que todas as pastas criadas devem estar vázias, exceto pelo arquivo &lt;em&gt;Makefile&lt;/em&gt;, que não deve ser modificado ou alterado.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Projeto criado&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/capB-newProject/07.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O projeto foi criado com sucesso, agora é preciso criar os arquivos fontes e de cabeçalho.&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2021/capA-instalacao&quot;&gt;« Anexo A - Instalação do MPLAB-X e XC8&lt;/a&gt; « Anexo B - Novo Projeto » &lt;a href=&quot;/ddp/2021/capC-novosArquivos&quot;&gt;Anexo C - Novos arquivos »&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Projeto</summary></entry><entry><title type="html">Anexo A - Instalação do MPLAB-X e XC8</title><link href="http://localhost:4000/ddp/2021/capA-instalacao/" rel="alternate" type="text/html" title="Anexo A - Instalação do MPLAB-X e XC8" /><published>2021-04-10T17:17:21-03:00</published><updated>2021-04-10T17:17:21-03:00</updated><id>http://localhost:4000/ddp/2021/capA-instalacao</id><content type="html" xml:base="http://localhost:4000/ddp/2021/capA-instalacao/">&lt;h1 id=&quot;instalação-de-ide-e-compilador&quot;&gt;Instalação de IDE e Compilador&lt;/h1&gt;

&lt;p&gt;Para o desenvolvimento de projetos para microcontroladores das famílias PIC e AVR, a Microchip disponibiliza o ambiente de desenvolvimento integrado (&lt;em&gt;Integrated Development Environment - IDE&lt;/em&gt;) &lt;strong&gt;MPLAB-X&lt;/strong&gt; e compiladores para as diversas arquiteturas disponíveis.&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Realizar a instalação da IDE MPLAB-X e do compilador XC8 em sistema operacional GNU/Linux (Debian).&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;O &lt;strong&gt;MPLAB-X&lt;/strong&gt; é uma ferramenta que reúne (integra) diversas funcionalidades de apoio ao desenvolvimento de aplicações ou projetos, tais como um editor de código, colorização e destaque de palavras reservadas, chamadas ao compilador, navegação entre os arquivos, integração com ferramentas de versionamento, entre outras funções.&lt;/p&gt;

&lt;p&gt;O &lt;strong&gt;XC8&lt;/strong&gt; é o compilador para dispositivos de 8 bits, os mais simples da família. Ele é o esponsável por traduzir o código escrito pelo programador em linguagem C na linguagem de execução do microcontrolador, ou seja, um cojunto de códigos binários com a sequência de passos logicamente ordenados a serem processados e executados pelo microcontrolador.&lt;/p&gt;

&lt;p&gt;A Microhip disponibiliza em seu site o &lt;a href=&quot;https://www.microchip.com/en-us/development-tools-tools-and-software/mplab-x-ide&quot;&gt;MPLAB-X&lt;/a&gt; e o &lt;a href=&quot;https://www.microchip.com/en-us/development-tools-tools-and-software/mplab-xc-compilers&quot;&gt;XC-8&lt;/a&gt; de forma gratuita, bem como a versão online, o &lt;a href=&quot;https://www.microchip.com/en-us/development-tools-tools-and-software/mplab-xpress&quot;&gt;MPLAB Xpress Cloud Based IDE&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;versões&quot;&gt;Versões&lt;/h2&gt;
&lt;p&gt;Existem diversas versões tanto da IDE quanto do compilador, e apesar da recomendação padrão ser o uso da versão mais recente, caso você use o gravador PICkit2, como é o meu caso, use a versão do compilador XC8 v1.45 e da IDE 4.40. 
A partir da versão da IDE 5.x não há mais suporte ao gravador citado, sendo necessária a utilização do PICkit3 ou mesmo o PICkit4.&lt;/p&gt;

&lt;p&gt;Caso use apenas com simulador, a recomendação é usar as versões mais recentes de 
compilador e IDE.&lt;/p&gt;

&lt;h2 id=&quot;instalação&quot;&gt;Instalação&lt;/h2&gt;

&lt;p&gt;A Microchip fornece um conjunto de ferramentas de desenvolvimento de forma gratuita e multiplataforma para programar os seus microcontroladores.&lt;/p&gt;

&lt;p&gt;Serão baixados apenas os dois programas mostrados na Figura 1.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: MPLAB X IDE e XC Compiler&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/logos-IDE-XC.png?raw=true&quot; alt=&quot;logos-IDE-XC&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A IDE pode ser baixada diretamente do &lt;em&gt;site&lt;/em&gt; onde pode-se escolher a versão adequada para o sistema operacional em que será realizada a instalação, Windows, &lt;strong&gt;Linux&lt;/strong&gt; ou Mac.&lt;/p&gt;

&lt;p&gt;O compilador precisa ser baixado e instalado separadamente, pois deve ser instalado em função da família e arquitetura do microcontrolador que será utilizado, podendo ser de 8, 16 ou 32 bits.
A compilação para os microcontroladores de 8 bits é realizada com o compilador XC8, 
que também pode ser obtido gratuitamente no &lt;a href=&quot;https://www.microchip.com/en-us/development-tools-tools-and-software/mplab-xc-compilers&quot;&gt;site&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Versões anteriores à recorrente podem ser acessadas no &lt;a href=&quot;https://www.microchip.com/development-tools/pic-and-dspic-downloads-archive&quot;&gt;arquivo&lt;/a&gt; de downloads.&lt;/p&gt;

&lt;p&gt;O &lt;strong&gt;PICkit2&lt;/strong&gt; é a plataforma de software e hardware para a gravação do firmware na memória de programa do PIC. É uma versão descontinuada pela Microchip mas amplamente distribuida e de fácil montagem. 
Algumas informações adicionais podem ser encontradas em &lt;a href=&quot;https://www.microchip.com/developmenttools/ProductDetails/pg164120&quot;&gt;pickit2&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;instalação-no-gnulinux---mplab-x-32bits&quot;&gt;Instalação no GNU/Linux - MPLAB-X 32bits&lt;/h2&gt;

&lt;p&gt;O processo de instalação apresentado aqui é uma das possíveis opções devido ao caráter multiplataforma da IDE.&lt;/p&gt;

&lt;p&gt;O sistema operacional que utilizo é o &lt;a href=&quot;https://www.debian.org/index.pt.html&quot;&gt;Debian&lt;/a&gt;, assim, após o script de instalação baixado, atentar para alterar o seu privilégio da seguinte forma:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curtaeletronica@uC:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; +x MPLABX-v3.15-linux-installer.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ao executar o &lt;em&gt;script&lt;/em&gt; de instalação do MPLAB-X IDE, para versões de 32 bits, 
sendo instalada em arquitetura de 64 bits, a seguinte mensagem é apresentada:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curtaeletronica@uC:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; ./MPLABX-v3.15-linux-installer.sh
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; senha para curtaeletronica:
64 Bit, check libraries
Check &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;32 Bit libraries
These 32 bit libraries were not found and are needed &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;MPLAB X to run:
libc.so
libdl.so
libgcc_s.so
libm.so
libpthread.so
librt.so
libstdc++.so
libexpat.so
libX11.so
libXext.so

For more information visit http://microchip.wikidot.com/install:mplabx-lin64

curtaeletronica@uC:~&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;O &lt;em&gt;script&lt;/em&gt; de instalação executa uma busca por dependências no sistema, ou seja,  bibliotecas, para a correta execução do programa a ser instalado.&lt;/p&gt;

&lt;p&gt;Para instalar as dependências a seguinte linha de comando pode ser executada:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curtaeletronica@uC:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;libc6:i386 lib32stdc++-10-dev libexpat1:i386 libx11-dev:i386 libxext-dev:i386
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Com esse comando, as dependências devem ser atendidas.&lt;/p&gt;

&lt;p&gt;Informações relevantes, sobre a instalação das bibliotecas em um sistema baseado em Ubuntu/Debian, podem ser encontradas no &lt;a href=&quot;https://www.edivaldobrito.com.br/suporte-a-32-bits-no-ubuntu-de-64-bits/&quot;&gt;blog Edivaldo&lt;/a&gt; e em &lt;a href=&quot;http://microchipdeveloper.com/install:mplabx-lin64&quot;&gt;microchipDevHelp&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Após todas as dependências serem atendidas, a instalação é iniciada. 
Para versões com suporte a arquitetura de 64 bits, essas dependências não são necessárias.&lt;/p&gt;

&lt;h2 id=&quot;instalação-da-ide&quot;&gt;Instalação da IDE&lt;/h2&gt;

&lt;p&gt;Para a instalação aqui apresentada é utilizada a versão para arquitetura de 64 bits, v5.45, conforme o comando que segue:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curtaeletronica@uC:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; ./MPLABX-v5.45-linux-installer.sh 
64-bit Linux detected.
Check &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;64-bit libraries
Verifying archive integrity... All good.
Uncompressing MPLAB X v5.45 installer..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Um assistente do processo de instalação é aberto dando boas vindas, 
informando a versão que será instalada, que neste caso é a &lt;strong&gt;MPLAB X IDE 5.45&lt;/strong&gt;, conforme Figura 2.&lt;/p&gt;

&lt;p&gt;Para prosseguir, basta clicar em &lt;strong&gt;&lt;em&gt;Forward&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Setup&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/ide-01-setup.png?raw=true&quot; alt=&quot;mp00-setup&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A tela seguinte é do Contrato de Licensa, em que após leitura, estando de acordo:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Selecione a opção &lt;strong&gt;&lt;em&gt;I accept the agreement&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Em seguida clique em &lt;strong&gt;&lt;em&gt;Forward&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Licensa&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/ide-02-license.png?raw=true&quot; alt=&quot;Licensa&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Escolha o diretório de instalação.
    &lt;ul&gt;
      &lt;li&gt;Recomenda-se manter o local padrão.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Forward&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Diretório de Instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/ide-03-instOptions.png?raw=true&quot; alt=&quot;Diretório de Instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A tela a seguir apresenta a opção de instalação das aplicações de desenvolvimento e de programação, respectivamente IDE e IPE e logo abaixo as opções de compiladores para as arquiteturas de 8, 16 ou 32 bits, além de outras arquiteturas suportadas.&lt;/p&gt;

&lt;p&gt;A recomendação é a instalação das opções conforme a Figura 5, 
pois as demais opções não são necessárias.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Após a escolha das opções clicar em &lt;strong&gt;&lt;em&gt;Forward&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Seleção de Ferramentas/Aplicações&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/ide-04-selectApp.png?raw=true&quot; alt=&quot;Seleção de Ferramentas/Aplicações &quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O sistema está pronto para iniciar a instalação.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Forward&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Resumo da Instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/ide-05-readyToInstall.png?raw=true&quot; alt=&quot;Resumo da Instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A instalação segue em progresso, e o tempo depende do poder de processamento do 
computador que se está realizando a instalação, neste caso a duração foi inferior a três minutos.&lt;/p&gt;

&lt;h2 id=&quot;instalação-do-compilador-xc8&quot;&gt;Instalação do compilador XC8&lt;/h2&gt;

&lt;p&gt;Após o compilador ter sido baixado e receber o privilégio de execução, basta iniciar e seguir os passos do assistente de instalação, conforme segue:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Instalação do XC8&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-01-setup.png?raw=true&quot; alt=&quot;Instalação do XC8&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A tela seguinte é do Contrato de Licensa, em que após leitura, estando de acordo:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Selecionar a opção &lt;strong&gt;&lt;em&gt;I accept the agreement&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Next&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 8: Licensa da instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-02-license.png?raw=true&quot; alt=&quot;Licensa da instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;No tipo de licensa usamos a versão &lt;strong&gt;&lt;em&gt;free&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 9: Tipo de instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-03-licenseType.png?raw=true&quot; alt=&quot;Tipo de instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;É possível escolher o local da instalação do compilador, 
mas a recomendação é usar o diretório padrão, já indicado na instalação.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 10: Diretório de instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-04-instDirectory.png?raw=true&quot; alt=&quot;Diretório de instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Selecione as opções conforme segue, para que as configurações sejam atribuidos a todos os usuários da máquina (computador) além de compartilhar o caminho do xc8 na variável de ambiente.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 11: Parâmetros do compilador&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-05-compilerSettings.png?raw=true&quot; alt=&quot;Parâmetros do compilador&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Última tela antes do início da instalação, caso queira realizar alguma alteração, a hora é agora.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 12: Pronto para instalar&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-06-ready.png?raw=true&quot; alt=&quot;Pronto para instalar&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Instalação em progresso.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 13: Progresso da instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-07-installing.png?raw=true&quot; alt=&quot;Progresso da instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Informações da licensa. Apenas prossiga.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 14: Instalação completa&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-08-complete.png?raw=true&quot; alt=&quot;Instalação completa&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Fim da instalação.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 15: Fim da instalação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master/_posts/tUcPIC/capA-instalacao/xc8-09-complete.png?raw=true&quot; alt=&quot;Fim da instalação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;Anexo A - Instalação do MPLAB-X e XC8 » &lt;a href=&quot;/ddp/2021/capB-novoProjeto&quot;&gt;Anexo B - Novo Projeto »&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Instalação de IDE e Compilador</summary></entry><entry><title type="html">Arquivo de Configuração (config.h)</title><link href="http://localhost:4000/ddp/2021/config/" rel="alternate" type="text/html" title="Arquivo de Configuração (config.h)" /><published>2021-01-22T12:28:21-03:00</published><updated>2021-01-22T12:28:21-03:00</updated><id>http://localhost:4000/ddp/2021/config</id><content type="html" xml:base="http://localhost:4000/ddp/2021/config/">&lt;h1 id=&quot;configurações-do-uc&quot;&gt;Configurações do uC&lt;/h1&gt;

&lt;p&gt;Existem configurações de periféricos que modificam o comportamento do microcontrolador e por isso são realizadas apenas no momento da gravação, não podendo ser realizadas durante a execução do código, como por exemplo a habilitação do &lt;em&gt;Watchdog timer&lt;/em&gt;, a proteção da memória de código, a disponibilização de um determinado pino para &lt;em&gt;Master clear&lt;/em&gt; ou I/O, etc.&lt;/p&gt;

&lt;p&gt;A plataforma MPLAB-X proporciona uma aba para realizar tais configuraçãos de forma fácil, inclusive gerando o respectivo código a ser inserido no programa. Este código é aqui gerado e inserido em um arquivo de cabeçalho (.h) com o nome de &lt;strong&gt;config&lt;/strong&gt;, modularizando e concentrando os comandos de configuração do microcontrolador.&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Criar um arquivo para a configuração do microcontrolador utilizando a plataforma MPLAB-X.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;criar-um-arquivo-fonte&quot;&gt;Criar um arquivo fonte&lt;/h2&gt;

&lt;p&gt;O passo inicial é criar no diretório &lt;em&gt;Header Files&lt;/em&gt; (Arquivos de cabeçalho) um arquivo com a extensão &lt;strong&gt;.h&lt;/strong&gt;, conforme ilustrado na Figura 1.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique com o botão direito do &lt;em&gt;mouse&lt;/em&gt; sobre o diretório &lt;strong&gt;Header Files&lt;/strong&gt; do projeto;&lt;/li&gt;
  &lt;li&gt;Arraste o cursor até a opção &lt;strong&gt;&lt;em&gt;New&lt;/em&gt;&lt;/strong&gt; e em seguida &lt;strong&gt;&lt;em&gt;xc8_header.h&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: Seleção de novo arquivo de cabeçalho (.h)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig01-newH.png?raw=true&quot; alt=&quot;Selecao novo arquivo cabeçalho&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A depender da versão da &lt;em&gt;IDE&lt;/em&gt; podem aparecer outras opções, mas o importante é selecionar um arquivo com a extensão &lt;strong&gt;.h&lt;/strong&gt; e dar o nome de &lt;strong&gt;config&lt;/strong&gt;, uma referência direta ao seu conteúdo.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;No campo &lt;strong&gt;File Name&lt;/strong&gt; insira o nome &lt;strong&gt;config&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Inserção de nome do arquivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig02-nome.png?raw=true&quot; alt=&quot;Nome do arquivo .h&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Obs.: Não é necessário inserir a extensão no nome do arquivo, pois há um campo específico para isso logo abaixo do local de inserção dele.&lt;/p&gt;

&lt;p&gt;Então é gerado automaticamente um arquivo &lt;strong&gt;config.h&lt;/strong&gt; com os termos de uso do software definidos pela &lt;strong&gt;Microchip&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Arquivo de cabeçalho com termos de uso&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig03-termos.png?raw=true&quot; alt=&quot;Termos de uso&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Em uma tradução direta no Google Tradutor temos:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Microchip Technology Inc. e suas subsidiárias. Você pode usar este software 
e quaisquer derivados exclusivamente com produtos Microchip.

ESTE SOFTWARE É FORNECIDO PELA MICROCHIP &quot;NO ESTADO EM QUE SE ENCONTRA&quot;. 
NENHUMA GARANTIA, EXPRESSA OU IMPLÍCITA, SE APLICAR A ESTE SOFTWARE, 
INCLUINDO QUAISQUER GARANTIAS IMPLÍCITAS DE NÃO-VIOLAÇÃO, comercialização e
adequação a uma finalidade específica, ou a sua interação com os produtos 
microchip combinação com quaisquer outros produtos, ou de qualquer INSCRIÇÃO.

EM NENHUMA HIPÓTESE A MICROCHIP SERÁ RESPONSÁVEL POR QUALQUER PERDA INDIRETA,
ESPECIAL, PUNITIVA, INCIDENTAL OU CONSEQUENCIAL, DANO, CUSTO OU DESPESA DE 
QUALQUER TIPO RELACIONADO AO SOFTWARE, POR QUEM FOR CAUSADA, MESMO SE A 
MICROCHIP TIVER SIDO AVISADA PREVIAMENTE. NA EXTENSÃO MÁXIMA PERMITIDA POR LEI, 
A RESPONSABILIDADE TOTAL DA MICROCHIP EM TODAS AS REIVINDICAÇÕES DE QUALQUER 
FORMA RELACIONADAS A ESTE SOFTWARE NÃO EXCEDERÁ O VALOR DAS TAXAS, SE HOUVER, 
QUE VOCÊ PAGOU DIRETAMENTE À MICROCHIP POR ESTE SOFTWARE.

A MICROCHIP FORNECE ESTE SOFTWARE CONDICIONALMENTE APÓS SUA ACEITAÇÃO DESTES TERMOS.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Todo este texto pode ser excluído do arquivo.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clique em qualquer lugar no texto;&lt;/li&gt;
  &lt;li&gt;Pressione &lt;strong&gt;Ctrl+A&lt;/strong&gt; para selecionar todo o texto;&lt;/li&gt;
  &lt;li&gt;Pressione &lt;strong&gt;Delete&lt;/strong&gt; para excluir o texto.&lt;/li&gt;
  &lt;li&gt;Insira o seguinte código:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#ifndef CONFIG_H
#define CONFIG_H
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;O resultado é apresentado na ilustração da Figura 4.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Arquivo config.h&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig04-config.png?raw=true&quot; alt=&quot;Arquivo Config&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Para acessar os bits de configuração:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Clique em &lt;strong&gt;&lt;em&gt;Production&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;Selecione &lt;strong&gt;&lt;em&gt;Set Configuration Bits&lt;/em&gt;&lt;/strong&gt;;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Acessar os bits de configuração&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig05-setConfigBits.png?raw=true&quot; alt=&quot;Set Config Bits&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Uma aba é aberta, geralmente, na parte inferior da tela.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Registradores de configuração&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig06-genCode.png?raw=true&quot; alt=&quot;Generate Code&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Faça os ajustes em &lt;strong&gt;&lt;em&gt;Options&lt;/em&gt;&lt;/strong&gt; conforme a indicação do quadro 1 na Figura 6.&lt;/p&gt;

&lt;p&gt;Em seguida clique no botão &lt;strong&gt;&lt;em&gt;Generate Source Code to …&lt;/em&gt;&lt;/strong&gt;.
Uma nova aba com o código gerado é exibida.&lt;/p&gt;

&lt;p&gt;Repare que na indicação 3 da Figura 7 há um **#include &lt;xc.h&gt;** logo abaixo das configurações.&lt;/xc.h&gt;&lt;/p&gt;

&lt;p&gt;O quadro 7 indica o trecho que deve ser &lt;strong&gt;Selecionado&lt;/strong&gt; e &lt;strong&gt;copiado&lt;/strong&gt; para o &lt;strong&gt;config.h&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Código de configuração&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig07-codeConfig.png?raw=true&quot; alt=&quot;codeConfig&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O resultado após a cópia é ilustrado na Figura 8.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 8: Configuração no config.h&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig08-config.png?raw=true&quot; alt=&quot;config&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Por fim, para uma necessidade futura na utilização da função &lt;strong&gt;__delay_ms(500)&lt;/strong&gt;, insira o define:&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define _XTAL_FREQ 4000000
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;conforme ilustração da Figura 9.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 9: Definição da frequência do oscilador&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig09-xtal.png?raw=true&quot; alt=&quot;_XTAL_FREQ&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Por fim, inclua o arquivo de configuração no arquivo principal conforme indicação 6 da Figura 10.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 10: Inclusão do config no main&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig10-main.png?raw=true&quot; alt=&quot;Include config&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;Pressione &lt;strong&gt;Shift+F11&lt;/strong&gt; ou clique no botão com a indicação 7 da Figura 11, para realizar a limpeza e a compilação do projeto;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 11: Compilação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig11-compilacao.png?raw=true&quot; alt=&quot;Compilação&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Após o processo de compilação, geralmente na parte inferior, aparece uma a saída da compilação e uma mensagem de sucesso,  &lt;strong&gt;&lt;em&gt;BUILD SUCCESSFULL&lt;/em&gt;&lt;/strong&gt;, se tudo foi feito corretamente.&lt;/p&gt;

&lt;p&gt;Se alguma mensagem de erro ocorrer, veja qual é a primeira indicação de erro, &lt;strong&gt;procure entender a mensagem&lt;/strong&gt;, clique no link de erro pois a &lt;em&gt;IDE&lt;/em&gt; deve apontar o local. &lt;strong&gt;Atente-se para os detalhes!&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2021/capD-versionamento&quot;&gt;« Anexo D - Controle de Versão&lt;/a&gt; « Arquivo de Configuração (config.h) » &lt;a href=&quot;/ddp/2021/c1-piscaLED&quot;&gt;C1 - Pisca LED »&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Configurações do uC</summary></entry><entry><title type="html">P0021 - Novo Arquivo (main.c)</title><link href="http://localhost:4000/ddp/2020/P0021-novoArquivo/" rel="alternate" type="text/html" title="P0021 - Novo Arquivo (main.c)" /><published>2020-12-26T17:48:21-03:00</published><updated>2020-12-26T17:48:21-03:00</updated><id>http://localhost:4000/ddp/2020/P0021-novoArquivo</id><content type="html" xml:base="http://localhost:4000/ddp/2020/P0021-novoArquivo/">&lt;h1 id=&quot;novo-arquivo---mainc&quot;&gt;Novo Arquivo - main.c&lt;/h1&gt;

&lt;p&gt;Dentro de um projeto para microcontrolador, são criados basicamente arquivos fonte e de cabeçalho.&lt;/p&gt;

&lt;p&gt;Os arquivos &lt;strong&gt;fontes&lt;/strong&gt; são aqueles com extensão &lt;strong&gt;.c&lt;/strong&gt; e são escritos seguindo a sintaxe da linguagem de programação C, a mais utilizada para este tipo de aplicação.&lt;/p&gt;

&lt;p&gt;Os arquivos de &lt;strong&gt;cabeçalho&lt;/strong&gt; (&lt;em&gt;header&lt;/em&gt;) são aqueles com a extensão &lt;strong&gt;.h&lt;/strong&gt; e são utilizados como apresentação de funções em arquivos fontes diferentes de onde estão declaradas, permitindo assim que elas sejam invocadas (chamadas).&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Criar o arquivo fonte &lt;strong&gt;main.c&lt;/strong&gt; no projeto utilizando a plataforma MPLAB-X.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;criar-um-arquivo-fonte&quot;&gt;Criar um arquivo fonte&lt;/h2&gt;

&lt;p&gt;Um projeto geralmente possui vários arquivos fonte, apesar de ser possível criar todo o código em um único arquivo, mas não é uma boa prática.&lt;/p&gt;

&lt;p&gt;A divisão de funções e procedimentos em diversos arquivos é interessante pelo fato de agrupar códigos de uma mesma família, ou seja, funções e procedimentos que fazem parte da manipulação de uma mesma estrutura ou periférico.&lt;/p&gt;

&lt;h3 id=&quot;exemplo&quot;&gt;Exemplo:&lt;/h3&gt;
&lt;p&gt;Para fazer a leitura de um parâmetro analógico, é possível configurar um dos periféricos disponíveis no PIC16F887, o conversor Analógico Digital. 
Então, é necessário criar uma rotina de inicialização desse periférico e funções de acesso, sendo que todos esses códigos devem estar escritos dentro de um arquivo cujo nome se refira diretamente às funções ali presentes, como aqui por exemplo, &lt;strong&gt;adc.c&lt;/strong&gt;. 
Sendo assim, somente códigos pertinentes à menipulação de dados do conversor A/D devem estar contidos nesse arquivo, cada outro periférico ou estrutura utilizados devem ter os seus respectivos arquivos &lt;strong&gt;.c&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Para criar um novo arquivo, seja ele o primeiro arquivo fonte, ou qualquer um dos demais, o caminho mais prático é:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Selecionando o diretório &lt;strong&gt;&lt;em&gt;Source Files&lt;/em&gt;&lt;/strong&gt; (Arquivos Fonte) e clicando com o botão direitor do &lt;em&gt;mouse&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;Selecionando a opção &lt;strong&gt;&lt;em&gt;New&lt;/em&gt;&lt;/strong&gt; e em seguida &lt;strong&gt;main.c&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Obs.: No último passo, basta escolher qualquer opção de arquivos &lt;strong&gt;.c&lt;/strong&gt;, pois o conteúdo que vem previamente inserido não é necessário, apesar de que em alguns casos facilita a inserção dos primeiros dados do código.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: Seleção de novo arquivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0021/A01-novoArquivoC.png?raw=true&quot; alt=&quot;Selecao novo arquivo&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Selecione o nome do arquivo no campo &lt;strong&gt;&lt;em&gt;File Name&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Atente-se para as recomendações:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;O nome deve ser coerente com as funções e procedimentos que vão ali ser inseridos;&lt;/li&gt;
  &lt;li&gt;O nome deve conter apenas uma palavra. Caso queira utilizar mais do que uma palavra, use o ‘_’ (&lt;em&gt;underline&lt;/em&gt;) para ligar as palavras;&lt;/li&gt;
  &lt;li&gt;Não utilize acentos, cedilha ou caracteres diferentes do alfabeto ou números. Exceto o ‘_’.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Não é necessário inserir a extensão no nome do arquivo, que pode ser confirmada no campo abaixo: &lt;strong&gt;&lt;em&gt;Extension&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Nome do arquivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0021/A02-nomeArquivoC.png?raw=true&quot; alt=&quot;Nome do arquivo&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Após o nome estar inserido, clique em &lt;strong&gt;&lt;em&gt;Finish&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Perceba que no diretório &lt;strong&gt;&lt;em&gt;Source Files&lt;/em&gt;&lt;/strong&gt; foi inlcuído o arquivo &lt;strong&gt;main.c&lt;/strong&gt;, e este arquivo está aberto no editor.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Novo Arquivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0021/A03-mainC.png?raw=true&quot; alt=&quot;Novo arquivo&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O arquivo recém criado possui um cabeçalho como comentário, que contém o nome do arquivo e do autor, além da data de criação do arquivo.
Em seguida, uma estrutura básica com a inclusão da biblioteca padrão do compilador XC8 e a função principal.&lt;/p&gt;

&lt;p&gt;Em linguagem C apenas uma função é obrigatória, a função &lt;strong&gt;main&lt;/strong&gt;, que recomenda-se declará-la no arquivo de mesmo nome.&lt;/p&gt;

&lt;p&gt;Para todos os demais arquivos &lt;strong&gt;.c&lt;/strong&gt;, o código pré-inserido pode ser excluído, inclusive porque não pode haver duas funções com o mesmo nome.&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/ddp/2020/P0020-novoProjeto&quot;&gt;« P0020 - Novo Projeto&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/ddp/2021/P0022-config&quot;&gt;» P0022 - Arquivo de Configuração (config.h)&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;Agora é a sua vez!&lt;/p&gt;

&lt;p&gt;Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.&lt;/p&gt;

&lt;p&gt;Ficou com alguma dúvida, entre em contato.&lt;/p&gt;

&lt;p&gt;Bom trabalho!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Novo Arquivo - main.c</summary></entry><entry><title type="html">P0020 - Novo Projeto</title><link href="http://localhost:4000/ddp/2020/P0020-novoProjeto/" rel="alternate" type="text/html" title="P0020 - Novo Projeto" /><published>2020-12-19T16:24:21-03:00</published><updated>2020-12-19T16:24:21-03:00</updated><id>http://localhost:4000/ddp/2020/P0020-novoProjeto</id><content type="html" xml:base="http://localhost:4000/ddp/2020/P0020-novoProjeto/">&lt;h1 id=&quot;projeto&quot;&gt;Projeto&lt;/h1&gt;

&lt;p&gt;Um &lt;strong&gt;programa para o microcontrolador&lt;/strong&gt; é composto por &lt;strong&gt;diversos arquivos fontes, escritos em&lt;/strong&gt; alguma linguagem de programação, costumeiramente a &lt;strong&gt;linguagem C&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Esses &lt;strong&gt;arquivos são agrupados, organizados&lt;/strong&gt; e acompanhados de outros arquivos necessários para a construção de &lt;strong&gt;um projeto&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Um projeto é composto por arquivos fonte e de cabeçalho(&lt;strong&gt;.c e .h&lt;/strong&gt;), arquivos para sua construção (&lt;strong&gt;&lt;em&gt;makefile&lt;/em&gt;&lt;/strong&gt;) no processo de compilação, arquivos de montagem (&lt;strong&gt;&lt;em&gt;assembly&lt;/em&gt;&lt;/strong&gt;), diversos arquivos intermediários e por fim o arquivo executável (&lt;strong&gt;.hex&lt;/strong&gt;).&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Criar um novo projeto utilizando a plataforma MPLAB-X.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;mplab-x&quot;&gt;MPLAB-X&lt;/h2&gt;

&lt;p&gt;O ambiente de desenvolvimento integrada (&lt;em&gt;Integrated Development Environment&lt;/em&gt; - IDE) é uma ferramenta que reúne (integra) diversas funcionalidades de apoio ao desenvolvimento de aplicações ou projetos, tais como um editor de código, colorização e destaque de palavras reservadas, chamadas ao compilador, navegação entre os arquivos, entre outras funções.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1: IDE Microchip MPLAB-X&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B02-IDE.png?raw=true&quot; alt=&quot;IDE MPLAB-X&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Para a criação de um novo projeto, é possível acessar o assistente através de três formas possíveis:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;menu superior;&lt;/li&gt;
  &lt;li&gt;ícones; e,&lt;/li&gt;
  &lt;li&gt;teclas de atalho.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;criando-um-novo-projeto&quot;&gt;Criando um novo projeto:&lt;/h3&gt;
&lt;p&gt;No menu superior clique em &lt;strong&gt;&lt;em&gt;File&lt;/em&gt;&lt;/strong&gt; e em seguida selecione e clique em &lt;strong&gt;&lt;em&gt;New Project&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Novo Projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B03-fileNewProject.png?raw=true&quot; alt=&quot;Novo Projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A tela do assistente de criação do projeto é executada, então, basta seguir fazendo as seleções apropriadas nos passos e clicando em &lt;strong&gt;&lt;em&gt;Next &amp;gt;&lt;/em&gt;&lt;/strong&gt; ao finalizar as escolhas.&lt;/p&gt;

&lt;p&gt;Para a criação de um projeto básico siga as seguintes instruções:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;em &lt;strong&gt;&lt;em&gt;Categories:&lt;/em&gt;&lt;/strong&gt; escolha &lt;strong&gt;&lt;em&gt;Microchip Embedded&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;em &lt;strong&gt;&lt;em&gt;Projects:&lt;/em&gt;&lt;/strong&gt; escolha &lt;strong&gt;&lt;em&gt;Standalone Project&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 3: Tipo de Projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B04-chooseProject.png?raw=true&quot; alt=&quot;Tipo do Projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A tela seguinte permite escolher o dispositivo que receberá o executável do projeto.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;em &lt;strong&gt;&lt;em&gt;Family:&lt;/em&gt;&lt;/strong&gt; escolha no menu suspenso a família do &lt;em&gt;chip&lt;/em&gt; utilizado &lt;strong&gt;&lt;em&gt;Mid-Range 8-bit MCUs (PIC10/12/16/MCP)&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;em &lt;strong&gt;&lt;em&gt;Device:&lt;/em&gt;&lt;/strong&gt; escolha/pesquise o &lt;em&gt;chip&lt;/em&gt; que será utilizado no projeto &lt;strong&gt;PIC16F887&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Obs.: É possível suprimir a escolha da família do microcontrolador digitando diretamente a pesquisa do dispositivo alvo.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 4: Seleção do dispositivo&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B05-selectDevice.png?raw=true&quot; alt=&quot;Seleção do Dispositivo&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Caso um dispositivo de gravação esteja conectado ao computador, é possível escolher a ferramenta de gravação, caso contrário, escolha a opção &lt;strong&gt;&lt;em&gt;Simulator&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 5: Seleção do gravador/simulador&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B06-selectTool.png?raw=true&quot; alt=&quot;Seleção do Gravador/Simulador&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Selecione a versão do compilador em &lt;strong&gt;XC8&lt;/strong&gt;:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 6: Seleção do compilador&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B07-selectCompiler.png?raw=true&quot; alt=&quot;Seleção do Compilador&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Insira o nome do projeto.&lt;/p&gt;

&lt;p&gt;Nomes são sempre complicados…. Sugiro que adote algumas boas práticas:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;O nome do arquivo/diretório/projeto tenha uma relação direta com o objetivo proposto;&lt;/li&gt;
  &lt;li&gt;Não utilize nomes com mais de uma palavra; Caso precise, utilize ‘_’ para conectar as palavras. Não deixe espaços em branco nos nomes;&lt;/li&gt;
  &lt;li&gt;Não usar um nome de projeto já existente.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Geralmente, a IDE aloca os projetos na pasta padrão criada ao instalar o programa. Sugiro manter os projetos neste local, apesar de ser possível salvar o projeto em qualquer outro local que você tenha acesso.&lt;/p&gt;

&lt;p&gt;Por fim, clique em &lt;strong&gt;&lt;em&gt;Finish&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 7: Nome e local do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B08-nomeLocalProjeto.png?raw=true&quot; alt=&quot;Seleção do Nome e Local&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Após este processo, o projeto foi criado.
Perceba que na aba &lt;strong&gt;&lt;em&gt;Projects&lt;/em&gt;&lt;/strong&gt; o projeto criado está em negrito e foram criados alguns diretórios: &lt;strong&gt;&lt;em&gt;Header Files&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;em&gt;Important Files&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;em&gt;Linker Files&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;em&gt;Source Files&lt;/em&gt;&lt;/strong&gt;,&lt;strong&gt;&lt;em&gt;Libraries&lt;/em&gt;&lt;/strong&gt; e &lt;strong&gt;&lt;em&gt;Loadables&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 8: Novo Projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0020/B09-novoProjeto.png?raw=true&quot; alt=&quot;Novo Projeto&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Note que apenas o diretório &lt;strong&gt;&lt;em&gt;Important Files&lt;/em&gt;&lt;/strong&gt; possui um arquivo, o &lt;strong&gt;&lt;em&gt;Makefile&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Importante&lt;/strong&gt;: Enquanto não souber usar o &lt;strong&gt;&lt;em&gt;Makefile&lt;/em&gt;&lt;/strong&gt;, não mexa nele!!!&lt;/p&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;&lt;a href=&quot;/ddp/2020/P0021-novoArquivo&quot;&gt;»P0021 - Novo arquivo (main.c)&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;Agora é a sua vez!&lt;/p&gt;

&lt;p&gt;Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.&lt;/p&gt;

&lt;p&gt;Ficou com alguma dúvida, entre em contato.&lt;/p&gt;

&lt;p&gt;Bom trabalho!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Projeto</summary></entry><entry><title type="html">P0130 - Teclado Matricial</title><link href="http://localhost:4000/ddp/2020/P0130-teclado4x4/" rel="alternate" type="text/html" title="P0130 - Teclado Matricial" /><published>2020-08-16T18:31:21-03:00</published><updated>2020-08-16T18:31:21-03:00</updated><id>http://localhost:4000/ddp/2020/P0130-teclado4x4</id><content type="html" xml:base="http://localhost:4000/ddp/2020/P0130-teclado4x4/">&lt;h1 id=&quot;teclado-4x4&quot;&gt;Teclado 4x4&lt;/h1&gt;

&lt;p&gt;A interface com o operador popularmente denominada Interface Homem Máquina(IHM), costumeiramente possui a dupla display LCD e teclado matricial.&lt;/p&gt;

&lt;h2 id=&quot;objetivo&quot;&gt;Objetivo&lt;/h2&gt;

&lt;p&gt;Implementar uma interface com um teclado matricial 4x4 para entrada de dados.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;1-circuito-hardware&quot;&gt;1. Circuito (&lt;em&gt;Hardware&lt;/em&gt;)&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 1.1: Teclado Matricial 4x4&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0130/P0130-teclado4x4.gif?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;2-programa-firmware&quot;&gt;2. Programa (&lt;em&gt;Firmware&lt;/em&gt;)&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Figura 2: Árvore de diretório do projeto&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0130/projectTree.jpg?raw=true&quot; alt=&quot;circuito&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;estrutura-do-programa&quot;&gt;Estrutura do programa&lt;/h2&gt;

&lt;h3 id=&quot;programa-principal&quot;&gt;Programa principal&lt;/h3&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/*
 * File:   main.c
 * Author: josewrpereira
 *
 * Created on 15 de Agosto de 2020, 21:18:21
 *
 * -------------------------------------------------
 *          MAPA DE ENTRADAS E SAIDAS
 * -------------------------------------------------
 *  Pinos   |nº     | Conexão
 * ---------|-------|-------------------------------
 *  RD2     |21     | LCD_RS
 *  RD3     |22     | LCD_EN
 *  RD4     |27     | LCD_D4
 *  RD5     |28     | LCD_D5
 *  RD6     |29     | LCD_D6
 *  RD7     |30     | LCD_D7
 * ---------|-------|-------------------------------
 *  RB0     |33     | Teclado Saída   L0
 *  RB1     |34     | Teclado Saída   L1
 *  RB2     |35     | Teclado Saída   L2
 *  RB3     |36     | Teclado Saída   L3
 *  RB4     |37     | Teclado Entrada C0
 *  RB5     |38     | Teclado Entrada C1
 *  RB6     |39     | Teclado Entrada C2
 *  RB7     |40     | Teclado Entrada C3
 * -------------------------------------------------
 * -------------------------------------------------
 */&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;xc.h&amp;gt;
#include &quot;config.h&quot;
#include &quot;delay.h&quot;
#include &quot;dispLCD4vias.h&quot;
#include &quot;teclado.h&quot;
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Tecla   &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;dispLCD_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;teclado_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teclado_scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dispLCD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;inclusão-de-bibliotecas&quot;&gt;Inclusão de bibliotecas&lt;/h3&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/*
 * File:   teclado.c
 * Author: josewrpereira
 *
 * Created on 15 de Agosto de 2020, 21:21
 * 
 * -------------------------------------------------
 *          MAPA DE ENTRADAS E SAIDAS
 * -------------------------------------------------
 *  Pinos   |nº     | Conexão
 * ---------|-------|-------------------------------
 *  RB0     |33     | Teclado Saída   L0
 *  RB1     |34     | Teclado Saída   L1
 *  RB2     |35     | Teclado Saída   L2
 *  RB3     |36     | Teclado Saída   L3
 *  RB4     |37     | Teclado Entrada C0
 *  RB5     |38     | Teclado Entrada C1
 *  RB6     |39     | Teclado Entrada C2
 *  RB7     |40     | Teclado Entrada C3
 * -------------------------------------------------
 */&lt;/span&gt;


&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;xc.h&amp;gt;
#include &quot;delay.h&quot;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define NUM_COL         4
#define NUM_LIN         4
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define L0_MASK         0x01
#define C0_MASK         0x10
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;teclado_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TRISB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xF0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ANSELH&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;OPTION_REGbits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nRBPU&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;WPUB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;PORTB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tecladoMatriz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'5'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'6'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'7'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'9'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'*'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'#'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'D'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;teclado_scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aux&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NUM_LIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;PORTB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;L0_MASK&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NUM_COL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PORTB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C0_MASK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;aux&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tecladoMatriz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;   
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aux&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Agora é a sua vez!&lt;/p&gt;

&lt;p&gt;Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.&lt;/p&gt;

&lt;p&gt;Ficou com alguma dúvida, entre em contato.&lt;/p&gt;

&lt;p&gt;Bom trabalho!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/ddp/docs/tecnology/ucPIC&quot;&gt;Voltar&lt;/a&gt;&lt;/p&gt;</content><author><name>José W. R. Pereira</name></author><category term="ucPIC" /><summary type="html">Teclado 4x4</summary></entry></feed>