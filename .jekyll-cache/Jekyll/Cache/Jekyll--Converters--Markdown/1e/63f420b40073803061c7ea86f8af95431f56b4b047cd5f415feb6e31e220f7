I"1 <h1 id="configurações-do-uc">Configurações do uC</h1>
<p>Existem configurações de periféricos que modificam o comportamento do microcontrolador e por isso são realizadas apenas no momento da gravação, não podendo ser realizadas durante a execução do código, como por exemplo a habilitação do <em>Watchdog timer</em>, a proteção da memória de código, a disponibilização de um determinado pino para <em>Master clear</em> ou I/O, etc.</p>

<p>A plataforma MPLAB-X proporciona uma aba para realizar tais configuraçãos de forma fácil, inclusive gerando o respectivo código a ser inserido no programa. Este código é aqui gerado e inserido em um arquivo de cabeçalho (.h) com o nome de <strong>config</strong>, modularizando e concentrando os comandos de configuração do microcontrolador.</p>

<h2 id="objetivo">Objetivo</h2>

<p>Criar um arquivo para a configuração do microcontrolador utilizando a plataforma MPLAB-X.</p>

<!--more-->

<h2 id="criar-um-arquivo-fonte">Criar um arquivo fonte</h2>

<p>O passo inicial é criar no diretório <em>Header Files</em> (Arquivos de cabeçalho) um arquivo com a extensão <strong>.h</strong>, conforme ilustrado na Figura 1.</p>

<ul>
  <li>Clique com o botão direito do <em>mouse</em> sobre o diretório <strong>Header Files</strong> do projeto;</li>
  <li>Arraste o cursor até a opção <strong><em>New</em></strong> e em seguida <strong><em>xc8_header.h</em></strong>.</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1: Seleção de novo arquivo de cabeçalho (.h)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig01-newH.png?raw=true" alt="Selecao novo arquivo cabeçalho" /></td>
    </tr>
  </tbody>
</table>

<p>A depender da versão da <em>IDE</em> podem aparecer outras opções, mas o importante é selecionar um arquivo com a extensão <strong>.h</strong> e dar o nome de <strong>config</strong>, uma referência direta ao seu conteúdo.</p>

<ul>
  <li>No campo <strong>File Name</strong> insira o nome <strong>config</strong>.</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 2: Inserção de nome do arquivo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig02-nome.png?raw=true" alt="Nome do arquivo .h" /></td>
    </tr>
  </tbody>
</table>

<p>Obs.: Não é necessário inserir a extensão no nome do arquivo, pois há um campo específico para isso logo abaixo do local de inserção dele.</p>

<p>Então é gerado automaticamente um arquivo <strong>config.h</strong> com os termos de uso do software definidos pela <strong>Microchip</strong>.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 3: Arquivo de cabeçalho com termos de uso</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig03-termos.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<p>Em uma tradução direta no Google Translate temos:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Microchip Technology Inc. e suas subsidiárias. Você pode usar este software e quaisquer derivados exclusivamente com produtos Microchip.

ESTE SOFTWARE É FORNECIDO PELA MICROCHIP "NO ESTADO EM QUE SE ENCONTRA". NENHUMA GARANTIA, EXPRESSA OU IMPLÍCITA, SE APLICAR A ESTE SOFTWARE, INCLUINDO AS GARANTIAS DE QUALQUER IMPLÍCITAS DE NÃO-VIOLAÇÃO, comercialização e adequação a uma finalidade específica, ou a sua interação com os produtos microchip combinação com quaisquer outros produtos, ou de qualquer INSCRIÇÃO.

EM NENHUMA HIPÓTESE A MICROCHIP SERÁ RESPONSÁVEL POR QUALQUER PERDA INDIRETA, ESPECIAL, PUNITIVA, INCIDENTAL OU CONSEQÜENCIAL, DANO, CUSTO OU DESPESA DE QUALQUER TIPO RELACIONADO AO SOFTWARE, POR QUEM FOR CAUSADA, MESMO SE A MICROQUIPE TIVER SIDO AVISADA. PREVISÍVEL. NA EXTENSÃO MÁXIMA PERMITIDA POR LEI, A RESPONSABILIDADE TOTAL DA MICROCHIP EM TODAS AS REIVINDICAÇÕES DE QUALQUER FORMA RELACIONADAS A ESTE SOFTWARE NÃO EXCEDERÁ O VALOR DAS TAXAS, SE HOUVER, QUE VOCÊ PAGOU DIRETAMENTE À MICROCHIP POR ESTE SOFTWARE.

A MICROCHIP FORNECE ESTE SOFTWARE CONDICIONALMENTE APÓS SUA ACEITAÇÃO DESTES TERMOS.
</code></pre></div></div>

<p>Todo este texto pode ser excluído do arquivo.</p>

<ul>
  <li>Clique em qualquer lugar no texto;</li>
  <li>Digite <strong>Ctrl+A</strong> para selecionar todo o texto;</li>
  <li><strong>Delete</strong> para excluir o texto.</li>
</ul>

<p>Após o arquivo estar em branco digite:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef CONFIG_H
#define CONFIG_H
</span>
<span class="cp">#endif 
</span></code></pre></div></div>

<p>Conforme ilustrado na Figura 4.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 4: Arquivo config.h</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig04-config.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 5: Acessar os bits de configuração</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig05-setConfigBits.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 6: Registradores de configuração</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig06-genCode.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 7: Código de configuração</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig07-codeConfig.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 8: Configuração no config.h</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig08-config.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 9: Definição da frequência do oscilador</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig09-xtal.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 10: Inclusão do config no main</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0022/fig10-main.png?raw=true" alt="Selecao novo arquivo" /></td>
    </tr>
  </tbody>
</table>

<hr />

<blockquote>
  <blockquote>
    <blockquote>
      <p><a href="/ddp/2020/P0021-novoArquivo">« P0021 - Novo arquivo (main.c)</a></p>
    </blockquote>
  </blockquote>
</blockquote>

<hr />

<p>Agora é a sua vez!</p>

<p>Crie o seu projeto, copie o código, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explicação, busque outras fontes, pergunte, responda, explique, faça alterações conscientes no código, explore, divirta-se.</p>

<p>Ficou com alguma dúvida, entre em contato.</p>

<p>Bom trabalho!</p>

<p><a href="/ddp/docs/tecnology/ucPIC">Voltar</a></p>
:ET