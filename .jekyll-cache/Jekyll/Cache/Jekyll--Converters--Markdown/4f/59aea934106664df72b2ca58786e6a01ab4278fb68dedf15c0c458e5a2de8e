I"Ë<h1 id="arquivos">Arquivos</h1>

<p>Dentro de um projeto para microcontrolador, s√£o criados basicamente arquivos fonte e de cabe√ßalho.</p>

<p>Os arquivos <strong>fontes</strong> s√£o aqueles com extens√£o <strong>.c</strong> e s√£o escritos seguindo a sintaxe da linguagem de programa√ß√£o C, a mais utilizada para este tipo de aplica√ß√£o.</p>

<p>Os arquivos de <strong>cabe√ßalho</strong> (<em>header</em>) s√£o aqueles com a extens√£o <strong>.h</strong> e s√£o utilizados como apresenta√ß√£o de fun√ß√µes em arquivos fontes diferentes de onde est√£o declaradas, permitindo assim que elas sejam invocadas (chamadas).</p>

<h2 id="objetivo">Objetivo</h2>

<p>Manipular arquivos fonte e de cabe√ßalho no projeto utilizando a plataforma MPLAB-X.</p>

<!--more-->

<h2 id="criar-um-arquivo-fonte">Criar um arquivo fonte</h2>

<p>Um projeto geralmente possui v√°rios arquivos fonte, apesar de ser poss√≠vel criar todo o c√≥digo em um √∫nico arquivo, mas n√£o √© uma boa pr√°tica.</p>

<p>A divis√£o de fun√ß√µes e procedimentos em diversos arquivos √© interessante pelo fato de agrupar c√≥digos de uma mesma fam√≠lia, ou seja, fun√ß√µes e procedimentos que fazem parte da manipula√ß√£o de uma mesma estrutura ou perif√©rico.</p>

<h3 id="exemplo">Exemplo:</h3>
<p>Para fazer a leitura de um par√¢metro anal√≥gico, √© poss√≠vel configurar um dos perif√©ricos dispon√≠veis no PIC16F887, o conversor Anal√≥gico Digital. 
Ent√£o, √© necess√°rio criar uma rotina de inicializa√ß√£o desse perif√©rico e fun√ß√µes de acesso, sendo que todos esses c√≥digos devem estar escritos dentro de um arquivo cujo nome se refira diretamente √†s fun√ß√µes ali presentes, como aqui por exemplo, <strong>adc.c</strong>. 
Sendo assim, somente c√≥digos pertinentes √† menipula√ß√£o de dados do conversor A/D devem estar contidos nesse arquivo, cada outro perif√©rico ou estrutura utilizados devem ter os seus respectivos arquivos <strong>.c</strong>.</p>

<p>Para criar um novo arquivo, seja ele o primeiro arquivo fonte, ou qualquer um dos demais, o caminho mais pr√°tico √©:</p>

<ul>
  <li>Selecionando o diret√≥rio <strong><em>Source Files</em></strong> (Arquivos Fonte) e clicando com o bot√£o direitor do <em>mouse</em>;</li>
  <li>Selecionando a op√ß√£o <strong><em>New</em></strong> e em seguida <strong>main.c</strong>.</li>
</ul>

<p>Obs.: No √∫ltimo passo, basta escolher qualquer op√ß√£o de arquivos <strong>.c</strong>, pois o conte√∫do que vem previamente inserido n√£o √© necess√°rio, apesar de que em alguns casos facilita a inser√ß√£o dos primeiros dados do c√≥digo.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.1: Sele√ß√£o de novo arquivo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0021/A01-novoArquivoC.png?raw=true" alt="IDE MPLAB-X" /></td>
    </tr>
  </tbody>
</table>

<p>Selecione o nome do arquivo no campo <strong><em>File Name</em></strong>.</p>

<p>Atente-se para as recomenda√ß√µes:</p>
<ul>
  <li>O nome deve ser coerente com as fun√ß√µes e procedimentos que v√£o ali ser inseridos;</li>
  <li>O nome deve conter apenas uma palavra. Caso queira utilizar mais do que uma palavra, use o ‚Äò_‚Äô (<em>underline</em>) para ligar as palavras;</li>
  <li>N√£o utilize acentos, cedilha ou caracteres diferentes do alfabeto ou n√∫meros. Exceto o ‚Äò_‚Äô.</li>
</ul>

<p>N√£o √© necess√°rio inserir a extens√£o no nome do arquivo, que pode ser confirmada no campo abaixo: <strong><em>Extension:</em></strong>.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.2: Nome do arquivo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0021/A02-nomeArquivoC.png?raw=true" alt="IDE MPLAB-X" /></td>
    </tr>
  </tbody>
</table>

<p>Ap√≥s o nome estar inserido, clique em <strong><em>Finish</em></strong>.</p>

<p>Perceba que no diret√≥rio <strong><em>Source Files</em></strong> foi inlcu√≠do o arquivo <strong>main.c</strong>, e este arquivo est√° aberto no editor.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Figura 1.3: Novo Arquivo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://github.com/JoseWRPereira/ddp/blob/master//_posts/tUcPIC/imgP0021/A03-*.png?raw=true" alt="IDE MPLAB-X" /></td>
    </tr>
  </tbody>
</table>

<p>O arquivo rec√©m criado possui um cabe√ßalho como coment√°rio, que cont√©m o nome do arquivo e do autor, al√©m da data de cria√ß√£o do arquivo.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * File:   main.c
 * Author: josewrpereira
 *
 * Created on 26 de Dezembro de 2020, 19:29
 */</span>
</code></pre></div></div>

<p>Este trecho de c√≥digo n√£o produz a√ß√£o no projeto, serve apenas como documenta√ß√£o, apoio ou orienta√ß√£o ao programador.</p>

<p>Em seguida, uma estrutura b√°sica com a inclus√£o da biblioteca padr√£o do compilador XC8 e a fun√ß√£o principal.</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;xc.h&gt;
</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="o-coment√°rio-em-bloco">O coment√°rio em bloco:</h3>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
  O coment√°rio em bloco possui um delimitador de inicio (barra asterisco) 
  e um de fim (asterisco barra), sendo que tudo entre eles n√£o √© interpretado 
  pelo compilador, ou seja, n√£o vai produzir uma a√ß√£o no programa execut√°vel.

  Assim √© altamente recomendado que seja utilizado este recurso para 
  descrever quais pinos s√£o utilizados, como uma determinada fun√ß√£o 
  mais complexa se comporta ou como utiliz√°-la, sempre que o c√≥digo 
  n√£o estiver simples e facilmente compreens√≠vel, insira coment√°rios. 
  S√£o sempre bem vindos. 

  Lembre-se: √© bem prov√°vel que daqui alguns dias nem voc√™ lembre o que 
  voc√™ quis fazer, imagina outro programador tentando entender o seu racioc√≠nio. 
 */</span>
</code></pre></div></div>

<hr />

<p>Agora √© a sua vez!</p>

<p>Crie o seu projeto, copie o c√≥digo, execute-o, procure os erros, arrume-os, seja resiliente, leia novamente a explica√ß√£o, busque outras fontes, pergunte, responda, explique, fa√ßa altera√ß√µes conscientes no c√≥digo, explore, divirta-se.</p>

<p>Ficou com alguma d√∫vida, entre em contato.</p>

<p>Bom trabalho!</p>

<p><a href="/ddp/docs/tecnology/ucPIC">Voltar</a></p>
:ET